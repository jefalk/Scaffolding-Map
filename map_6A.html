<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LO Map — PHYS 6A Mechanics</title>
<style>
  :root {
  --legend-width: 300px;
  --legend-left: 12px;
  --legend-top: 150px;
  --panel-width: 360px;
  --toolbar-max-width: 1050px;
}
html, body { margin:0; padding:0; background:#0b1020; color:#f2f5ff; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
  #wrap { display:flex; height:100vh; overflow:hidden; }
  #viz { flex:1; }
  #panel { width: var(--panel-width, 360px); border-left:1px solid #1e2a4a; padding:16px; background:#0f1730; position:relative; overflow:auto; }
  h1 { font-size:18px; margin:0 0 8px 0; color:#fff; }
  .small { font-size:12px; color:#a9b4d0; }
  #globalLegend { position:fixed; top: var(--legend-top); left: var(--legend-left); width: var(--legend-width); max-width: var(--legend-width); background:#0b1020; border:1px solid #1e2a4a; border-radius:12px; padding:8px 10px; z-index:10; overflow:auto; }
  #globalLegend.collapsed .legend-content{display:none;}
  #globalLegend.collapsed{padding-bottom:6px;}

  .legend-row { display:flex; align-items:center; gap:8px; margin:4px 0; }
  .swatch { width:12px; height:12px; border-radius:50%; }
  .toolbar { position:fixed; top:12px; left:12px; right: calc(var(--panel-width) + 12px); transform:none; display:flex; gap:8px; align-items:center; background:#0b1020; border:1px solid #1e2a4a; border-radius:12px; padding:8px 10px; z-index:11; flex-wrap:wrap; max-width: var(--toolbar-max-width); box-sizing:border-box; }
  .node { cursor:grab; }
  .label { font-size:10px; pointer-events:none; fill:#e1e7ff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
  .link { stroke:#6172a6; stroke-opacity:0.25; }
  .link.highlight { stroke-opacity:1; }
  .link.forward { stroke:#00c853; }
  .link.backward { stroke:#ff5252; }
  .link.hidden { display:none; }
  .node.dim { opacity:0.25; }
  .link.dim { opacity:0.06; }
  .badge { display:inline-block; padding:2px 8px; border-radius:999px; font-size:11px; background:#1a2240; border:1px solid #2a3a70; color:#cfe0ff; }
  button, select, input[type="range"] { background:#1a2240; color:#cfe0ff; border:1px solid #2a3a70; border-radius:10px; padding:6px 8px; cursor:pointer; font-size:12px; }
  button:hover { filter:brightness(1.15); }
  #details { margin-top:12px; padding:10px; border-radius:12px; background:#0b1020; border:1px solid #1e2a4a; min-height:220px; max-height: calc(100vh - 170px); overflow:auto; }
  #details h2 { font-size:16px; margin:0 0 6px; }
  #details p { font-size:13px; line-height:1.35; color:#c7d2f0; }
  .controls { display:none; }
  .list-head { margin-top:6px; font-weight:600; color:#e6ecff; font-size:12px; }
  .list { font-size:12px; color:#cbd6ff; }
  .sep { width:1px; height:22px; background:#1e2a4a; display:inline-block; margin:0 6px; }
  .slider-wrap { display:flex; align-items:center; gap:6px; }
  .slider-wrap label { font-size:12px; color:#cfe0ff; }
  #footer { position:fixed; right:12px; bottom:10px; font-size:12px; color:#a9b4d0; background:#0b1020; border:1px solid #1e2a4a; border-radius:10px; padding:6px 8px; z-index:9; }

  .lo-item { display:flex; align-items:flex-start; gap:8px; margin:4px 0; }
  .lo-swatch { width:10px; height:10px; border-radius:50%; margin-top:4px; flex:0 0 10px; }
  .lo-id { font-weight:700; font-size:13.5px; }
  .lo-desc { margin-left:4px; font-size:12.5px; color:#c7d2f0; }
  .review-section { margin-top:10px; padding-top:10px; border-top:1px solid #1e2a4a; }
  .review-header { font-weight:600; color:#e6ecff; margin-bottom:6px; }
  .review-step { font-size:12px; margin:4px 0; line-height:1.3; }
  .review-step .step-id { font-weight:700; }
  .node.review-path circle { stroke:#ffffff; stroke-width:2px; }
  .node.review-dim { opacity:0.1; }
  .link.review-path { stroke-width:3px; opacity:1.0; }
  .link.review-dim { opacity:0.06; }


  .node.selected circle { stroke:#ffd166; stroke-width:3px; filter: drop-shadow(0 0 6px rgba(255,209,102,0.6)); }
  .node.selected .label { font-weight:700; font-size:11.5px; }
  .node.tag-dim, .node.review-dim { opacity:0.12; }
  .link.tag-dim, .link.review-dim { opacity:0.06; }
  .node.tag-on { opacity:1; }
  .link.tag-on { opacity:0.9; stroke-width:2px; }
.review-section { max-width: 360px; }
  .review-step { display:block; max-width: 340px; }
  .review-step .step-id { display:inline-block; margin-right:6px; font-weight:700; }
  .review-step .step-desc { display:block; margin-left:18px; }


  /* Hide unused toolbar buttons safely */
  .toolbar #pauseBtn, .toolbar #snapBtn, .toolbar #saveBtn { display:none; }

  .edge-labels-disabled .edge-pill text { fill:#cfe1ff; pointer-events:none; }
  .edge-labels-disabled .edge-pill rect { pointer-events:none; }

  .edge-labels-disabled{display:none}
</style>
</head>
<body>
<div id="globalLegend" class="legend expanded">
  <div class="legend-header">
    <div class="legend-title">Modules</div>
    <button id="legendToggle" class="legend-toggle" type="button" title="Show/hide module legend">Hide</button>
  </div>
  <div id="globalLegendContent" class="legend-content"></div>
</div>

<div class="toolbar">
  <label class="small">Layout</label>
  <select id="layoutMode">
    <option value="proximity">Proximity</option>
    <option value="rings">Rings</option>
    <option value="stacked">Stacked rows</option>
  </select>
  <span class="sep"></span>
  <button id="startBtn" title="Reset map to live layout">Reset Map</button>
  <button id="pauseBtn" title="Pause (Static)">Pause</button>
  <button id="snapBtn" title="Snap nodes to grid">Snap to Grid</button>
  <button id="resetBtn" title="Home (reset zoom/pan)">Home</button>
  <button id="saveBtn" title="Save Node Positions">Save</button>
  <span class="sep"></span>
  <div class="slider-wrap">
    <label for="spacing">Spacing</label>
    <input id="spacing" type="range" min="0.8" max="2.2" step="0.05" value="1.35">
  </div>

  <div class="slider-wrap">
    <label for="sizeScale">Node size</label>
    <input id="sizeScale" type="range" min="0.6" max="1.8" step="0.05" value="1.0">
  </div>
  <span class="sep"></span>
  
<div class="slider-wrap">
  <label for="highlightTagSelect">Highlight</label>
  <select id="highlightTagSelect" style="min-width:160px"></select>
</div>
<button id="highlightTagBtn" title="Highlight all LOs with this tag">Highlight Concept</button>
<div class="slider-wrap">
  <label for="reviewTagSelect">Review tag</label>
  <select id="reviewTagSelect" style="min-width:160px"></select>
</div>
<button id="reviewBtn" title="Compute review path using the selected node">Review Path</button>



<button id="clearReviewBtn" title="Clear review path and highlights">Clear</button>
  <span class="sep"></span>
  <label class="small">Links</label>
  
  <select id="linkMode">
    <option value="all">All</option>
    <option value="revision">Revision only</option>
  
  </select>
</div>
    


<div id="wrap">
  <svg id="viz" width="1400" height="1000"></svg>
  <aside id="panel">
    <h1>Learning Objective Details</h1>
    <div class="small">Click a node to see details. Click on canvas or use clear button to clear selection. Switch layouts in the toolbar. Highlight concepts or find reveiw paths with toolbar functions.</div>
    <div id="details"><div class="small">No node selected.</div></div>
  </aside>
</div>

<div id="footer">Jackson Falk — jefalk@ucsc.edu</div>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script id="graph-data" type="application/json">{"nodes": [{"id": "10A", "module_num": 10, "module_title": "Angular Momentum", "label": "A", "description": "Relate the angular velocity vector to the direction of rotation using the right-hand rule.", "color": "#17becf"}, {"id": "10B", "module_num": 10, "module_title": "Angular Momentum", "label": "B", "description": "Identify the direction of an angular momentum vector for a rotating object.", "color": "#17becf"}, {"id": "10C", "module_num": 10, "module_title": "Angular Momentum", "label": "C", "description": "Calculate an object’s angular momentum from its angular speed and rotational inertia.", "color": "#17becf"}, {"id": "10D", "module_num": 10, "module_title": "Angular Momentum", "label": "D", "description": "Solve for a point source's angular momentum from its velocity vector and relative location from a pivot point.", "color": "#17becf"}, {"id": "10E", "module_num": 10, "module_title": "Angular Momentum", "label": "E", "description": "Use conservation of angular momentum to solve a problem.", "color": "#17becf"}, {"id": "1A", "module_num": 1, "module_title": "Mathematical Foundations", "label": "A", "description": "Convert a quantity from one unit of measure to another.", "color": "#1f77b4"}, {"id": "1B", "module_num": 1, "module_title": "Mathematical Foundations", "label": "B", "description": "Employ scientific notation in representing very large and very small numbers.", "color": "#1f77b4"}, {"id": "1C", "module_num": 1, "module_title": "Mathematical Foundations", "label": "C", "description": "Specify whether given physical quantities are scalars or vectors.", "color": "#1f77b4"}, {"id": "1D", "module_num": 1, "module_title": "Mathematical Foundations", "label": "D", "description": "Relate the components of a vector to the magnitude and direction of the vector.", "color": "#1f77b4"}, {"id": "1E", "module_num": 1, "module_title": "Mathematical Foundations", "label": "E", "description": "Deconstruct a vector into components.", "color": "#1f77b4"}, {"id": "1F", "module_num": 1, "module_title": "Mathematical Foundations", "label": "F", "description": "Determine the sum or difference of two (or more) vectors by adding (or subtracting) like components.", "color": "#1f77b4"}, {"id": "1G", "module_num": 1, "module_title": "Mathematical Foundations", "label": "G", "description": "Recognize the slope of a curve on a plot as change in vertically represented parameter over change in horizontally represented parameter.", "color": "#1f77b4"}, {"id": "1H", "module_num": 1, "module_title": "Mathematical Foundations", "label": "H", "description": "Limit mathematical results to the proper number of significant figures.", "color": "#1f77b4"}, {"id": "2A", "module_num": 2, "module_title": "Kinematics", "label": "A", "description": "Calculate the change in a quantity using the final value minus the initial value.", "color": "#ff7f0e"}, {"id": "2B", "module_num": 2, "module_title": "Kinematics", "label": "B", "description": "Distinguish between an object's position and displacement.", "color": "#ff7f0e"}, {"id": "2C", "module_num": 2, "module_title": "Kinematics", "label": "C", "description": "Relate an object's average velocity to its displacement and the associated time interval.", "color": "#ff7f0e"}, {"id": "2D", "module_num": 2, "module_title": "Kinematics", "label": "D", "description": "Recognize the instantaneous velocity as the derivative of the position with respect to time.", "color": "#ff7f0e"}, {"id": "2E", "module_num": 2, "module_title": "Kinematics", "label": "E", "description": "Relate an object's average acceleration to its change in velocity and the associated time interval.", "color": "#ff7f0e"}, {"id": "2F", "module_num": 2, "module_title": "Kinematics", "label": "F", "description": "Recognize the instantaneous acceleration as the derivative of the velocity with respect to time.", "color": "#ff7f0e"}, {"id": "2G", "module_num": 2, "module_title": "Kinematics", "label": "G", "description": "Relate position versus time, velocity versus time, and acceleration versus time graphs to one another.", "color": "#ff7f0e"}, {"id": "2H", "module_num": 2, "module_title": "Kinematics", "label": "H", "description": "Identify known and unknown quantities in kinematic problems.", "color": "#ff7f0e"}, {"id": "2I", "module_num": 2, "module_title": "Kinematics", "label": "I", "description": "Solve one (or more) of the kinematic equations for an unknown quantity for motion involving constant velocity.", "color": "#ff7f0e"}, {"id": "2J", "module_num": 2, "module_title": "Kinematics", "label": "J", "description": "Solve one (or more) of the kinematic equations for an unknown quantity for motion involving constant acceleration.", "color": "#ff7f0e"}, {"id": "2K", "module_num": 2, "module_title": "Kinematics", "label": "K", "description": "Reduce a two-dimensional problem into two coupled one-dimensional problems by resolving the components of velocity and acceleration into components along two perpendicular axes.", "color": "#ff7f0e"}, {"id": "3A", "module_num": 3, "module_title": "Newton's Laws", "label": "A", "description": "Identify and describe each of Newton's Laws.", "color": "#2ca02c"}, {"id": "3B", "module_num": 3, "module_title": "Newton's Laws", "label": "B", "description": "Identify all the forces exerted on an object.", "color": "#2ca02c"}, {"id": "3C", "module_num": 3, "module_title": "Newton's Laws", "label": "C", "description": "Represent all the forces exerted on an object with a free-body diagram.", "color": "#2ca02c"}, {"id": "3D", "module_num": 3, "module_title": "Newton's Laws", "label": "D", "description": "Determine the components of a force from the magnitude and direction of the force.", "color": "#2ca02c"}, {"id": "3E", "module_num": 3, "module_title": "Newton's Laws", "label": "E", "description": "Identify Newton's third law (action/reaction) pairs of forces.", "color": "#2ca02c"}, {"id": "3F", "module_num": 3, "module_title": "Newton's Laws", "label": "F", "description": "Describe situations in which the velocity of an object is a nonzero constant when no net force acts on the object.", "color": "#2ca02c"}, {"id": "3G", "module_num": 3, "module_title": "Newton's Laws", "label": "G", "description": "Describe what an inertial reference frame is and how it is related to Newton's Laws.", "color": "#2ca02c"}, {"id": "4A", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "A", "description": "Relate a frictional force to the (perpendicular) normal force.", "color": "#d62728"}, {"id": "4B", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "B", "description": "Determine direction of force of friction from relative motion of two surfaces.", "color": "#d62728"}, {"id": "4C", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "C", "description": "Relate Newton's second law to a free-body diagram in one and two dimensional scenarios.", "color": "#d62728"}, {"id": "4D", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "D", "description": "Solve for the net (total) force exerted on each object, or an unknown force, by summing individual forces.", "color": "#d62728"}, {"id": "4E", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "E", "description": "Calculate the acceleration of an object from the net (total) force exerted on each object.", "color": "#d62728"}, {"id": "4F", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "F", "description": "Apply Hooke's law to relate the force exerted by a stretched/compressed spring to the displacement from equilibrium and the spring constant.", "color": "#d62728"}, {"id": "4G", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "G", "description": "Utilize the relationship between the maximum velocity or acceleration of a mass-spring oscillator and the angular frequency or amplitude of oscillation to solve for an unknown quantity.", "color": "#d62728"}, {"id": "4H", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "H", "description": "Recognize the properties of a simple harmonic oscillator with a sinusoidal function, including information on the position, velocity, or acceleration of the oscillator.", "color": "#d62728"}, {"id": "4I", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "I", "description": "Relate the frequency, period, and/or amplitude of an object undergoing simple harmonic oscillations to the properties of the spring or pendulum to which it is connected.", "color": "#d62728"}, {"id": "4J", "module_num": 4, "module_title": "Applications of Newton's Laws", "label": "J", "description": "Recognize that the period of a pendulum is independent of the bob's mass, and that the period of a mass/spring system is independent of the amplitude of oscillation.", "color": "#d62728"}, {"id": "5A", "module_num": 5, "module_title": "Energy", "label": "A", "description": "Calculate the kinetic energy of a particle given its mass and its velocity", "color": "#9467bd"}, {"id": "5B", "module_num": 5, "module_title": "Energy", "label": "B", "description": "Calculate the gravitational potential energy for an object near Earth's surface given its mass and location.", "color": "#9467bd"}, {"id": "5C", "module_num": 5, "module_title": "Energy", "label": "C", "description": "Calculate the spring potential energy for a mass on a compressed or stretched spring with a given spring constant.", "color": "#9467bd"}, {"id": "5D", "module_num": 5, "module_title": "Energy", "label": "D", "description": "Recognize that conservation of mechanical energy is theoretically absolute.", "color": "#9467bd"}, {"id": "5E", "module_num": 5, "module_title": "Energy", "label": "E", "description": "Use the conservation of mechanical energy to calculate various properties of simple systems.", "color": "#9467bd"}, {"id": "5F", "module_num": 5, "module_title": "Energy", "label": "F", "description": "Recognize forces as either conservative or non-conservative forces.", "color": "#9467bd"}, {"id": "6A", "module_num": 6, "module_title": "Work and Power", "label": "A", "description": "Calculate the scalar (dot) product of two vectors using its definition and the component method.", "color": "#8c564b"}, {"id": "6B", "module_num": 6, "module_title": "Work and Power", "label": "B", "description": "Evaluate the work done by various forces over for an object with a given displacement.", "color": "#8c564b"}, {"id": "6C", "module_num": 6, "module_title": "Work and Power", "label": "C", "description": "Recognize conditions under which a force will do no work on an object.", "color": "#8c564b"}, {"id": "6D", "module_num": 6, "module_title": "Work and Power", "label": "D", "description": "Relate the sign of work (positive or negative) to the direction of the force relative to the direction of motion.", "color": "#8c564b"}, {"id": "6E", "module_num": 6, "module_title": "Work and Power", "label": "E", "description": "Apply the work-energy theorem to solve for information on the forces acting on an object.", "color": "#8c564b"}, {"id": "6F", "module_num": 6, "module_title": "Work and Power", "label": "F", "description": "Apply the work-energy theorem to solve for information on the work being done on an object.", "color": "#8c564b"}, {"id": "6G", "module_num": 6, "module_title": "Work and Power", "label": "G", "description": "Apply the work-energy theorem to solve for information on the change in kinetic energy of the object.", "color": "#8c564b"}, {"id": "6H", "module_num": 6, "module_title": "Work and Power", "label": "H", "description": "Apply energy conservation with the presence of the non-conservative force of friction.", "color": "#8c564b"}, {"id": "6I", "module_num": 6, "module_title": "Work and Power", "label": "I", "description": "Relate the average power supplied or consumed in a process to the duration of the process and the energy supplied or consumed.", "color": "#8c564b"}, {"id": "7A", "module_num": 7, "module_title": "Momentum", "label": "A", "description": "Relate the momentum of an object to the velocity vector and mass.", "color": "#e377c2"}, {"id": "7B", "module_num": 7, "module_title": "Momentum", "label": "B", "description": "Determine the direction of an object's momentum.", "color": "#e377c2"}, {"id": "7C", "module_num": 7, "module_title": "Momentum", "label": "C", "description": "Identify objects as being either internal or external to a system.", "color": "#e377c2"}, {"id": "7D", "module_num": 7, "module_title": "Momentum", "label": "D", "description": "Determine the impulse delivered to an object from the average applied force and duration of the force.", "color": "#e377c2"}, {"id": "7E", "module_num": 7, "module_title": "Momentum", "label": "E", "description": "Use conservation of momentum in one-dimension to solve for an unknown parameter from either before or after a collision.", "color": "#e377c2"}, {"id": "7F", "module_num": 7, "module_title": "Momentum", "label": "F", "description": "Identify whether a collision is elastic or inelastic.", "color": "#e377c2"}, {"id": "7G", "module_num": 7, "module_title": "Momentum", "label": "G", "description": "Specify condition under which both momentum and kinetic energy of a system are conserved.", "color": "#e377c2"}, {"id": "8A", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "A", "description": "Use radians as the unit of angle in circular motion problem solving.", "color": "#7f7f7f"}, {"id": "8B", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "B", "description": "Relate the angular velocity to the change in angular position over the change in time.", "color": "#7f7f7f"}, {"id": "8C", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "C", "description": "Relate the angular acceleration to the change in angular velocity over change in time.", "color": "#7f7f7f"}, {"id": "8D", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "D", "description": "Distinguish uniform from nonuniform circular motion.", "color": "#7f7f7f"}, {"id": "8E", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "E", "description": "For an object in uniform circular motion, relate its tangential speed and radius to its angular speed and its period of revolution.", "color": "#7f7f7f"}, {"id": "8F", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "F", "description": "For nonuniform circular motion, relate an object's tangential acceleration to its angular acceleration.", "color": "#7f7f7f"}, {"id": "8G", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "G", "description": "Construct the equations of rotational kinematics in exact analogy to the equations of one-dimensional accelerated motion.", "color": "#7f7f7f"}, {"id": "8H", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "H", "description": "Use the rotational kinematic equations to solve for an unknown quantity.", "color": "#7f7f7f"}, {"id": "8I", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "I", "description": "Recognize that a change in the direction of a velocity vector is associated with acceleration.", "color": "#7f7f7f"}, {"id": "8J", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "J", "description": "Solve for the centripetal acceleration of an object moving in a circular path with known radius and speed.", "color": "#7f7f7f"}, {"id": "8K", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "K", "description": "Identify radial forces acting on an object in circular motion as the centripetal force.", "color": "#7f7f7f"}, {"id": "8L", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "L", "description": "Calculate the center of mass of a collection of individual, point-like objects where each object may have a different mass and position.", "color": "#7f7f7f"}, {"id": "8M", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "M", "description": "Calculate the moment of inertia of multiple point sources oriented around an axis.", "color": "#7f7f7f"}, {"id": "8N", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "N", "description": "Relate rotational kinetic energy to the object’s moment of inertia and its angular speed.", "color": "#7f7f7f"}, {"id": "8O", "module_num": 8, "module_title": "Circular and Rotational Motion", "label": "O", "description": "With access to a reference, calculate the moment of inertia of a simple geometric object from its mass and dimensions.", "color": "#7f7f7f"}, {"id": "9A", "module_num": 9, "module_title": "Torque and Stability", "label": "A", "description": "Calculate the torque from the angular acceleration and moment of inertia of an object.", "color": "#bcbd22"}, {"id": "9B", "module_num": 9, "module_title": "Torque and Stability", "label": "B", "description": "Calculate the magnitude of the vector (cross) product using the definition of the cross product.", "color": "#bcbd22"}, {"id": "9C", "module_num": 9, "module_title": "Torque and Stability", "label": "C", "description": "Calculate the torque from a force vector applied a distance away from a pivot point.", "color": "#bcbd22"}, {"id": "9D", "module_num": 9, "module_title": "Torque and Stability", "label": "D", "description": "Determine the sign (positive or negative) of a torque according to its resultant rotation direction.", "color": "#bcbd22"}, {"id": "9E", "module_num": 9, "module_title": "Torque and Stability", "label": "E", "description": "Determine the direction of the vector (cross) product using the right-hand rule.", "color": "#bcbd22"}, {"id": "9F", "module_num": 9, "module_title": "Torque and Stability", "label": "F", "description": "Recognize that forces that point toward or away from a pivot point exert no torque on an object.", "color": "#bcbd22"}, {"id": "9G", "module_num": 9, "module_title": "Torque and Stability", "label": "G", "description": "Calculate the individual torques about a common axis and sum them to find the net torque on an object and the angular acceleration of that object.", "color": "#bcbd22"}, {"id": "9H", "module_num": 9, "module_title": "Torque and Stability", "label": "H", "description": "Define the conditions of object stability in terms of net force and net torque.", "color": "#bcbd22"}, {"id": "9I", "module_num": 9, "module_title": "Torque and Stability", "label": "I", "description": "Calculate the individual torques about a common axis of a stationary object, and use them to solve for an unknown force value.", "color": "#bcbd22"}], "links": [{"source": "10A", "target": "10B", "tags": ["xref"]}, {"source": "10A", "target": "10D", "tags": ["xref"]}, {"source": "10A", "target": "10E", "tags": ["xref"]}, {"source": "10B", "target": "10D", "tags": ["xref"]}, {"source": "10B", "target": "10E", "tags": ["xref"]}, {"source": "10C", "target": "10D", "tags": ["xref"]}, {"source": "10C", "target": "10E", "tags": ["xref"]}, {"source": "10D", "target": "10E", "tags": ["xref"]}, {"source": "1A", "target": "2A", "tags": ["xref"]}, {"source": "1A", "target": "2D", "tags": ["xref"]}, {"source": "1A", "target": "2E", "tags": ["xref"]}, {"source": "1A", "target": "2G", "tags": ["xref"]}, {"source": "1A", "target": "2H", "tags": ["xref"]}, {"source": "1A", "target": "4A", "tags": ["xref"]}, {"source": "1A", "target": "4D", "tags": ["xref"]}, {"source": "1A", "target": "4E", "tags": ["xref"]}, {"source": "1A", "target": "4F", "tags": ["xref"]}, {"source": "1A", "target": "5A", "tags": ["xref"]}, {"source": "1A", "target": "5B", "tags": ["xref"]}, {"source": "1A", "target": "5C", "tags": ["xref"]}, {"source": "1A", "target": "5E", "tags": ["xref"]}, {"source": "1A", "target": "6B", "tags": ["xref"]}, {"source": "1A", "target": "6E", "tags": ["xref"]}, {"source": "1A", "target": "6G", "tags": ["xref"]}, {"source": "1A", "target": "6H", "tags": ["xref"]}, {"source": "1A", "target": "6I", "tags": ["xref"]}, {"source": "1A", "target": "7A", "tags": ["xref"]}, {"source": "1A", "target": "7D", "tags": ["xref"]}, {"source": "1A", "target": "7E", "tags": ["xref"]}, {"source": "1A", "target": "8A", "tags": ["xref"]}, {"source": "1A", "target": "8B", "tags": ["xref"]}, {"source": "1A", "target": "8C", "tags": ["xref"]}, {"source": "1A", "target": "8E", "tags": ["xref"]}, {"source": "1A", "target": "8F", "tags": ["xref"]}, {"source": "1A", "target": "8G", "tags": ["xref"]}, {"source": "1A", "target": "8H", "tags": ["xref"]}, {"source": "1A", "target": "8L", "tags": ["xref"]}, {"source": "1A", "target": "8M", "tags": ["xref"]}, {"source": "1A", "target": "8N", "tags": ["xref"]}, {"source": "1A", "target": "8O", "tags": ["xref"]}, {"source": "1A", "target": "9A", "tags": ["xref"]}, {"source": "1A", "target": "9C", "tags": ["xref"]}, {"source": "1A", "target": "10C", "tags": ["xref"]}, {"source": "1A", "target": "10D", "tags": ["xref"]}, {"source": "1B", "target": "1A", "tags": ["xref"]}, {"source": "1B", "target": "1H", "tags": ["xref"]}, {"source": "1B", "target": "2I", "tags": ["xref"]}, {"source": "1B", "target": "2J", "tags": ["xref"]}, {"source": "1B", "target": "2K", "tags": ["xref"]}, {"source": "1B", "target": "4D", "tags": ["xref"]}, {"source": "1B", "target": "4E", "tags": ["xref"]}, {"source": "1B", "target": "4F", "tags": ["xref"]}, {"source": "1B", "target": "5A", "tags": ["xref"]}, {"source": "1B", "target": "5B", "tags": ["xref"]}, {"source": "1B", "target": "5C", "tags": ["xref"]}, {"source": "1B", "target": "6B", "tags": ["xref"]}, {"source": "1B", "target": "6E", "tags": ["xref"]}, {"source": "1B", "target": "6F", "tags": ["xref"]}, {"source": "1B", "target": "6G", "tags": ["xref"]}, {"source": "1B", "target": "6H", "tags": ["xref"]}, {"source": "1B", "target": "6I", "tags": ["xref"]}, {"source": "1B", "target": "7A", "tags": ["xref"]}, {"source": "1B", "target": "7D", "tags": ["xref"]}, {"source": "1B", "target": "7E", "tags": ["xref"]}, {"source": "1B", "target": "8H", "tags": ["xref"]}, {"source": "1B", "target": "8J", "tags": ["xref"]}, {"source": "1B", "target": "8L", "tags": ["xref"]}, {"source": "1B", "target": "8M", "tags": ["xref"]}, {"source": "1B", "target": "9A", "tags": ["xref"]}, {"source": "1B", "target": "9C", "tags": ["xref"]}, {"source": "1B", "target": "9G", "tags": ["xref"]}, {"source": "1B", "target": "9I", "tags": ["xref"]}, {"source": "1B", "target": "10C", "tags": ["xref"]}, {"source": "1B", "target": "10D", "tags": ["xref"]}, {"source": "1C", "target": "1D", "tags": ["xref"]}, {"source": "1C", "target": "1E", "tags": ["xref"]}, {"source": "1C", "target": "1F", "tags": ["xref"]}, {"source": "1C", "target": "2A", "tags": ["xref"]}, {"source": "1C", "target": "2B", "tags": ["xref"]}, {"source": "1C", "target": "2H", "tags": ["xref"]}, {"source": "1C", "target": "2K", "tags": ["xref"]}, {"source": "1C", "target": "3B", "tags": ["xref"]}, {"source": "1C", "target": "3C", "tags": ["xref"]}, {"source": "1C", "target": "3D", "tags": ["xref"]}, {"source": "1C", "target": "3E", "tags": ["xref"]}, {"source": "1C", "target": "4A", "tags": ["xref"]}, {"source": "1C", "target": "4B", "tags": ["xref"]}, {"source": "1C", "target": "4C", "tags": ["xref"]}, {"source": "1C", "target": "4D", "tags": ["xref"]}, {"source": "1C", "target": "4E", "tags": ["xref"]}, {"source": "1C", "target": "4F", "tags": ["xref"]}, {"source": "1C", "target": "5D", "tags": ["xref"]}, {"source": "1C", "target": "5E", "tags": ["xref"]}, {"source": "1C", "target": "5F", "tags": ["xref"]}, {"source": "1C", "target": "6A", "tags": ["xref"]}, {"source": "1C", "target": "6B", "tags": ["xref"]}, {"source": "1C", "target": "6C", "tags": ["xref"]}, {"source": "1C", "target": "6D", "tags": ["xref"]}, {"source": "1C", "target": "6G", "tags": ["xref"]}, {"source": "1C", "target": "6H", "tags": ["xref"]}, {"source": "1C", "target": "7A", "tags": ["xref"]}, {"source": "1C", "target": "7B", "tags": ["xref"]}, {"source": "1C", "target": "7D", "tags": ["xref"]}, {"source": "1C", "target": "8J", "tags": ["xref"]}, {"source": "1C", "target": "8K", "tags": ["xref"]}, {"source": "1C", "target": "8L", "tags": ["xref"]}, {"source": "1C", "target": "9A", "tags": ["xref"]}, {"source": "1C", "target": "9B", "tags": ["xref"]}, {"source": "1C", "target": "9C", "tags": ["xref"]}, {"source": "1C", "target": "9D", "tags": ["xref"]}, {"source": "1C", "target": "9E", "tags": ["xref"]}, {"source": "1C", "target": "9F", "tags": ["xref"]}, {"source": "1C", "target": "9G", "tags": ["xref"]}, {"source": "1C", "target": "9I", "tags": ["xref"]}, {"source": "1C", "target": "10A", "tags": ["xref"]}, {"source": "1C", "target": "10B", "tags": ["xref"]}, {"source": "1D", "target": "1E", "tags": ["xref"]}, {"source": "1D", "target": "1F", "tags": ["xref"]}, {"source": "1D", "target": "2A", "tags": ["xref"]}, {"source": "1D", "target": "2B", "tags": ["xref"]}, {"source": "1D", "target": "2H", "tags": ["xref"]}, {"source": "1D", "target": "2K", "tags": ["xref"]}, {"source": "1D", "target": "3B", "tags": ["xref"]}, {"source": "1D", "target": "3C", "tags": ["xref"]}, {"source": "1D", "target": "3D", "tags": ["xref"]}, {"source": "1D", "target": "3E", "tags": ["xref"]}, {"source": "1D", "target": "4A", "tags": ["xref"]}, {"source": "1D", "target": "4B", "tags": ["xref"]}, {"source": "1D", "target": "4C", "tags": ["xref"]}, {"source": "1D", "target": "4D", "tags": ["xref"]}, {"source": "1D", "target": "4E", "tags": ["xref"]}, {"source": "1D", "target": "4F", "tags": ["xref"]}, {"source": "1D", "target": "5D", "tags": ["xref"]}, {"source": "1D", "target": "5E", "tags": ["xref"]}, {"source": "1D", "target": "5F", "tags": ["xref"]}, {"source": "1D", "target": "6A", "tags": ["xref"]}, {"source": "1D", "target": "6B", "tags": ["xref"]}, {"source": "1D", "target": "6C", "tags": ["xref"]}, {"source": "1D", "target": "6D", "tags": ["xref"]}, {"source": "1D", "target": "6G", "tags": ["xref"]}, {"source": "1D", "target": "6H", "tags": ["xref"]}, {"source": "1D", "target": "7A", "tags": ["xref"]}, {"source": "1D", "target": "7B", "tags": ["xref"]}, {"source": "1D", "target": "7D", "tags": ["xref"]}, {"source": "1D", "target": "8J", "tags": ["xref"]}, {"source": "1D", "target": "8K", "tags": ["xref"]}, {"source": "1D", "target": "8L", "tags": ["xref"]}, {"source": "1D", "target": "9A", "tags": ["xref"]}, {"source": "1D", "target": "9B", "tags": ["xref"]}, {"source": "1D", "target": "9C", "tags": ["xref"]}, {"source": "1D", "target": "9D", "tags": ["xref"]}, {"source": "1D", "target": "9E", "tags": ["xref"]}, {"source": "1D", "target": "9F", "tags": ["xref"]}, {"source": "1D", "target": "9G", "tags": ["xref"]}, {"source": "1D", "target": "9I", "tags": ["xref"]}, {"source": "1D", "target": "10A", "tags": ["xref"]}, {"source": "1D", "target": "10B", "tags": ["xref"]}, {"source": "1E", "target": "1F", "tags": ["xref"]}, {"source": "1E", "target": "2A", "tags": ["xref"]}, {"source": "1E", "target": "2B", "tags": ["xref"]}, {"source": "1E", "target": "2H", "tags": ["xref"]}, {"source": "1E", "target": "2K", "tags": ["xref"]}, {"source": "1E", "target": "3B", "tags": ["xref"]}, {"source": "1E", "target": "3C", "tags": ["xref"]}, {"source": "1E", "target": "3D", "tags": ["xref"]}, {"source": "1E", "target": "3E", "tags": ["xref"]}, {"source": "1E", "target": "4A", "tags": ["xref"]}, {"source": "1E", "target": "4B", "tags": ["xref"]}, {"source": "1E", "target": "4C", "tags": ["xref"]}, {"source": "1E", "target": "4D", "tags": ["xref"]}, {"source": "1E", "target": "4E", "tags": ["xref"]}, {"source": "1E", "target": "4F", "tags": ["xref"]}, {"source": "1E", "target": "5D", "tags": ["xref"]}, {"source": "1E", "target": "5E", "tags": ["xref"]}, {"source": "1E", "target": "5F", "tags": ["xref"]}, {"source": "1E", "target": "6A", "tags": ["xref"]}, {"source": "1E", "target": "6B", "tags": ["xref"]}, {"source": "1E", "target": "6C", "tags": ["xref"]}, {"source": "1E", "target": "6D", "tags": ["xref"]}, {"source": "1E", "target": "6G", "tags": ["xref"]}, {"source": "1E", "target": "6H", "tags": ["xref"]}, {"source": "1E", "target": "7A", "tags": ["xref"]}, {"source": "1E", "target": "7B", "tags": ["xref"]}, {"source": "1E", "target": "7D", "tags": ["xref"]}, {"source": "1E", "target": "8J", "tags": ["xref"]}, {"source": "1E", "target": "8K", "tags": ["xref"]}, {"source": "1E", "target": "8L", "tags": ["xref"]}, {"source": "1E", "target": "9A", "tags": ["xref"]}, {"source": "1E", "target": "9B", "tags": ["xref"]}, {"source": "1E", "target": "9C", "tags": ["xref"]}, {"source": "1E", "target": "9D", "tags": ["xref"]}, {"source": "1E", "target": "9E", "tags": ["xref"]}, {"source": "1E", "target": "9F", "tags": ["xref"]}, {"source": "1E", "target": "9G", "tags": ["xref"]}, {"source": "1E", "target": "9I", "tags": ["xref"]}, {"source": "1E", "target": "10A", "tags": ["xref"]}, {"source": "1E", "target": "10B", "tags": ["xref"]}, {"source": "1F", "target": "2A", "tags": ["xref"]}, {"source": "1F", "target": "2B", "tags": ["xref"]}, {"source": "1F", "target": "2H", "tags": ["xref"]}, {"source": "1F", "target": "2K", "tags": ["xref"]}, {"source": "1F", "target": "3B", "tags": ["xref"]}, {"source": "1F", "target": "3C", "tags": ["xref"]}, {"source": "1F", "target": "3D", "tags": ["xref"]}, {"source": "1F", "target": "3E", "tags": ["xref"]}, {"source": "1F", "target": "4A", "tags": ["xref"]}, {"source": "1F", "target": "4B", "tags": ["xref"]}, {"source": "1F", "target": "4C", "tags": ["xref"]}, {"source": "1F", "target": "4D", "tags": ["xref"]}, {"source": "1F", "target": "4E", "tags": ["xref"]}, {"source": "1F", "target": "4F", "tags": ["xref"]}, {"source": "1F", "target": "5D", "tags": ["xref"]}, {"source": "1F", "target": "5E", "tags": ["xref"]}, {"source": "1F", "target": "5F", "tags": ["xref"]}, {"source": "1F", "target": "6A", "tags": ["xref"]}, {"source": "1F", "target": "6B", "tags": ["xref"]}, {"source": "1F", "target": "6C", "tags": ["xref"]}, {"source": "1F", "target": "6D", "tags": ["xref"]}, {"source": "1F", "target": "6G", "tags": ["xref"]}, {"source": "1F", "target": "6H", "tags": ["xref"]}, {"source": "1F", "target": "7A", "tags": ["xref"]}, {"source": "1F", "target": "7B", "tags": ["xref"]}, {"source": "1F", "target": "7D", "tags": ["xref"]}, {"source": "1F", "target": "8J", "tags": ["xref"]}, {"source": "1F", "target": "8K", "tags": ["xref"]}, {"source": "1F", "target": "8L", "tags": ["xref"]}, {"source": "1F", "target": "9A", "tags": ["xref"]}, {"source": "1F", "target": "9B", "tags": ["xref"]}, {"source": "1F", "target": "9C", "tags": ["xref"]}, {"source": "1F", "target": "9D", "tags": ["xref"]}, {"source": "1F", "target": "9E", "tags": ["xref"]}, {"source": "1F", "target": "9F", "tags": ["xref"]}, {"source": "1F", "target": "9G", "tags": ["xref"]}, {"source": "1F", "target": "9I", "tags": ["xref"]}, {"source": "1F", "target": "10A", "tags": ["xref"]}, {"source": "1F", "target": "10B", "tags": ["xref"]}, {"source": "1G", "target": "2A", "tags": ["xref"]}, {"source": "1G", "target": "2D", "tags": ["xref"]}, {"source": "1G", "target": "2F", "tags": ["xref"]}, {"source": "1G", "target": "2G", "tags": ["xref"]}, {"source": "1G", "target": "3F", "tags": ["xref"]}, {"source": "1G", "target": "6I", "tags": ["xref"]}, {"source": "1G", "target": "8B", "tags": ["xref"]}, {"source": "1G", "target": "8C", "tags": ["xref"]}, {"source": "1G", "target": "8D", "tags": ["xref"]}, {"source": "1G", "target": "8I", "tags": ["xref"]}, {"source": "1H", "target": "1A", "tags": ["xref"]}, {"source": "1H", "target": "1H", "tags": ["xref"]}, {"source": "1H", "target": "2I", "tags": ["xref"]}, {"source": "1H", "target": "2J", "tags": ["xref"]}, {"source": "1H", "target": "2K", "tags": ["xref"]}, {"source": "1H", "target": "4D", "tags": ["xref"]}, {"source": "1H", "target": "4E", "tags": ["xref"]}, {"source": "1H", "target": "4F", "tags": ["xref"]}, {"source": "1H", "target": "5A", "tags": ["xref"]}, {"source": "1H", "target": "5B", "tags": ["xref"]}, {"source": "1H", "target": "5C", "tags": ["xref"]}, {"source": "1H", "target": "6B", "tags": ["xref"]}, {"source": "1H", "target": "6E", "tags": ["xref"]}, {"source": "1H", "target": "6F", "tags": ["xref"]}, {"source": "1H", "target": "6G", "tags": ["xref"]}, {"source": "1H", "target": "6H", "tags": ["xref"]}, {"source": "1H", "target": "6I", "tags": ["xref"]}, {"source": "1H", "target": "7A", "tags": ["xref"]}, {"source": "1H", "target": "7D", "tags": ["xref"]}, {"source": "1H", "target": "7E", "tags": ["xref"]}, {"source": "1H", "target": "8H", "tags": ["xref"]}, {"source": "1H", "target": "8J", "tags": ["xref"]}, {"source": "1H", "target": "8L", "tags": ["xref"]}, {"source": "1H", "target": "8M", "tags": ["xref"]}, {"source": "1H", "target": "9A", "tags": ["xref"]}, {"source": "1H", "target": "9C", "tags": ["xref"]}, {"source": "1H", "target": "9G", "tags": ["xref"]}, {"source": "1H", "target": "9I", "tags": ["xref"]}, {"source": "1H", "target": "10C", "tags": ["xref"]}, {"source": "1H", "target": "10D", "tags": ["xref"]}, {"source": "2A", "target": "2B", "tags": ["xref"]}, {"source": "2A", "target": "2C", "tags": ["xref"]}, {"source": "2A", "target": "2E", "tags": ["xref"]}, {"source": "2A", "target": "2G", "tags": ["xref"]}, {"source": "2A", "target": "2I", "tags": ["xref"]}, {"source": "2A", "target": "2J", "tags": ["xref"]}, {"source": "2A", "target": "2K", "tags": ["xref"]}, {"source": "2A", "target": "3F", "tags": ["xref"]}, {"source": "2A", "target": "4F", "tags": ["xref"]}, {"source": "2A", "target": "5B", "tags": ["xref"]}, {"source": "2A", "target": "5C", "tags": ["xref"]}, {"source": "2A", "target": "5E", "tags": ["xref"]}, {"source": "2A", "target": "6B", "tags": ["xref"]}, {"source": "2A", "target": "6C", "tags": ["xref"]}, {"source": "2A", "target": "6D", "tags": ["xref"]}, {"source": "2A", "target": "6E", "tags": ["xref"]}, {"source": "2A", "target": "6F", "tags": ["xref"]}, {"source": "2A", "target": "6G", "tags": ["xref"]}, {"source": "2A", "target": "7D", "tags": ["xref"]}, {"source": "2A", "target": "7E", "tags": ["xref"]}, {"source": "2A", "target": "8A", "tags": ["xref"]}, {"source": "2A", "target": "8B", "tags": ["xref"]}, {"source": "2A", "target": "8C", "tags": ["xref"]}, {"source": "2A", "target": "8D", "tags": ["xref"]}, {"source": "2A", "target": "8I", "tags": ["xref"]}, {"source": "2A", "target": "10E", "tags": ["xref"]}, {"source": "2B", "target": "2C", "tags": ["xref"]}, {"source": "2B", "target": "2D", "tags": ["xref"]}, {"source": "2B", "target": "2G", "tags": ["xref"]}, {"source": "2B", "target": "2I", "tags": ["xref"]}, {"source": "2B", "target": "2J", "tags": ["xref"]}, {"source": "2B", "target": "2K", "tags": ["xref"]}, {"source": "2B", "target": "4F", "tags": ["xref"]}, {"source": "2B", "target": "5B", "tags": ["xref"]}, {"source": "2B", "target": "5C", "tags": ["xref"]}, {"source": "2B", "target": "5E", "tags": ["xref"]}, {"source": "2B", "target": "6B", "tags": ["xref"]}, {"source": "2B", "target": "6C", "tags": ["xref"]}, {"source": "2B", "target": "6D", "tags": ["xref"]}, {"source": "2B", "target": "6E", "tags": ["xref"]}, {"source": "2B", "target": "6F", "tags": ["xref"]}, {"source": "2B", "target": "6G", "tags": ["xref"]}, {"source": "2B", "target": "6H", "tags": ["xref"]}, {"source": "2B", "target": "8A", "tags": ["xref"]}, {"source": "2B", "target": "8L", "tags": ["xref"]}, {"source": "2C", "target": "2D", "tags": ["xref"]}, {"source": "2C", "target": "2G", "tags": ["xref"]}, {"source": "2C", "target": "2I", "tags": ["xref"]}, {"source": "2C", "target": "2J", "tags": ["xref"]}, {"source": "2C", "target": "2K", "tags": ["xref"]}, {"source": "2C", "target": "3F", "tags": ["xref"]}, {"source": "2C", "target": "4A", "tags": ["xref"]}, {"source": "2C", "target": "4E", "tags": ["xref"]}, {"source": "2C", "target": "4F", "tags": ["xref"]}, {"source": "2C", "target": "4G", "tags": ["xref"]}, {"source": "2C", "target": "4I", "tags": ["xref"]}, {"source": "2C", "target": "7A", "tags": ["xref"]}, {"source": "2C", "target": "7E", "tags": ["xref"]}, {"source": "2C", "target": "8B", "tags": ["xref"]}, {"source": "2C", "target": "8E", "tags": ["xref"]}, {"source": "2C", "target": "8I", "tags": ["xref"]}, {"source": "2C", "target": "10D", "tags": ["xref"]}, {"source": "2C", "target": "10E", "tags": ["xref"]}, {"source": "2D", "target": "2G", "tags": ["xref"]}, {"source": "2D", "target": "2I", "tags": ["xref"]}, {"source": "2D", "target": "3F", "tags": ["xref"]}, {"source": "2D", "target": "5A", "tags": ["xref"]}, {"source": "2D", "target": "6E", "tags": ["xref"]}, {"source": "2D", "target": "6F", "tags": ["xref"]}, {"source": "2D", "target": "6G", "tags": ["xref"]}, {"source": "2D", "target": "6H", "tags": ["xref"]}, {"source": "2D", "target": "6I", "tags": ["xref"]}, {"source": "2D", "target": "7D", "tags": ["xref"]}, {"source": "2D", "target": "8E", "tags": ["xref"]}, {"source": "2D", "target": "8I", "tags": ["xref"]}, {"source": "2D", "target": "10D", "tags": ["xref"]}, {"source": "2E", "target": "2C", "tags": ["xref"]}, {"source": "2E", "target": "2F", "tags": ["xref"]}, {"source": "2E", "target": "2G", "tags": ["xref"]}, {"source": "2E", "target": "2H", "tags": ["xref"]}, {"source": "2E", "target": "2J", "tags": ["xref"]}, {"source": "2E", "target": "2K", "tags": ["xref"]}, {"source": "2E", "target": "3F", "tags": ["xref"]}, {"source": "2E", "target": "3G", "tags": ["xref"]}, {"source": "2E", "target": "4C", "tags": ["xref"]}, {"source": "2E", "target": "4D", "tags": ["xref"]}, {"source": "2E", "target": "4E", "tags": ["xref"]}, {"source": "2E", "target": "8C", "tags": ["xref"]}, {"source": "2E", "target": "8D", "tags": ["xref"]}, {"source": "2E", "target": "8F", "tags": ["xref"]}, {"source": "2E", "target": "8I", "tags": ["xref"]}, {"source": "2E", "target": "8J", "tags": ["xref"]}, {"source": "2F", "target": "2C", "tags": ["xref"]}, {"source": "2F", "target": "2G", "tags": ["xref"]}, {"source": "2F", "target": "2H", "tags": ["xref"]}, {"source": "2F", "target": "2J", "tags": ["xref"]}, {"source": "2F", "target": "2K", "tags": ["xref"]}, {"source": "2F", "target": "3F", "tags": ["xref"]}, {"source": "2F", "target": "3G", "tags": ["xref"]}, {"source": "2F", "target": "4C", "tags": ["xref"]}, {"source": "2F", "target": "4D", "tags": ["xref"]}, {"source": "2F", "target": "4E", "tags": ["xref"]}, {"source": "2F", "target": "8C", "tags": ["xref"]}, {"source": "2F", "target": "8D", "tags": ["xref"]}, {"source": "2F", "target": "8F", "tags": ["xref"]}, {"source": "2F", "target": "8I", "tags": ["xref"]}, {"source": "2F", "target": "8J", "tags": ["xref"]}, {"source": "2G", "target": "3F", "tags": ["xref"]}, {"source": "2G", "target": "4F", "tags": ["xref"]}, {"source": "2G", "target": "5C", "tags": ["xref"]}, {"source": "2G", "target": "6I", "tags": ["xref"]}, {"source": "2G", "target": "7D", "tags": ["xref"]}, {"source": "2G", "target": "8B", "tags": ["xref"]}, {"source": "2G", "target": "8C", "tags": ["xref"]}, {"source": "2G", "target": "8D", "tags": ["xref"]}, {"source": "2H", "target": "2A", "tags": ["xref"]}, {"source": "2H", "target": "2B", "tags": ["xref"]}, {"source": "2H", "target": "2C", "tags": ["xref"]}, {"source": "2H", "target": "2D", "tags": ["xref"]}, {"source": "2H", "target": "3F", "tags": ["xref"]}, {"source": "2H", "target": "4E", "tags": ["xref"]}, {"source": "2H", "target": "5A", "tags": ["xref"]}, {"source": "2H", "target": "5B", "tags": ["xref"]}, {"source": "2H", "target": "6E", "tags": ["xref"]}, {"source": "2H", "target": "6F", "tags": ["xref"]}, {"source": "2H", "target": "6G", "tags": ["xref"]}, {"source": "2H", "target": "6H", "tags": ["xref"]}, {"source": "2H", "target": "8G", "tags": ["xref"]}, {"source": "2H", "target": "8H", "tags": ["xref"]}, {"source": "2I", "target": "2E", "tags": ["xref"]}, {"source": "2I", "target": "2F", "tags": ["xref"]}, {"source": "2I", "target": "2G", "tags": ["xref"]}, {"source": "2I", "target": "2H", "tags": ["xref"]}, {"source": "2I", "target": "3B", "tags": ["xref"]}, {"source": "2I", "target": "4B", "tags": ["xref"]}, {"source": "2I", "target": "4C", "tags": ["xref"]}, {"source": "2I", "target": "4D", "tags": ["xref"]}, {"source": "2I", "target": "4E", "tags": ["xref"]}, {"source": "2I", "target": "6E", "tags": ["xref"]}, {"source": "2I", "target": "6F", "tags": ["xref"]}, {"source": "2I", "target": "6I", "tags": ["xref"]}, {"source": "2I", "target": "7A", "tags": ["xref"]}, {"source": "2I", "target": "8A", "tags": ["xref"]}, {"source": "2I", "target": "8B", "tags": ["xref"]}, {"source": "2I", "target": "8D", "tags": ["xref"]}, {"source": "2I", "target": "8H", "tags": ["xref"]}, {"source": "2I", "target": "9H", "tags": ["xref"]}, {"source": "2J", "target": "2D", "tags": ["xref"]}, {"source": "2J", "target": "2G", "tags": ["xref"]}, {"source": "2J", "target": "2H", "tags": ["xref"]}, {"source": "2J", "target": "2I", "tags": ["xref"]}, {"source": "2J", "target": "3B", "tags": ["xref"]}, {"source": "2J", "target": "3F", "tags": ["xref"]}, {"source": "2J", "target": "3G", "tags": ["xref"]}, {"source": "2J", "target": "4D", "tags": ["xref"]}, {"source": "2J", "target": "4E", "tags": ["xref"]}, {"source": "2J", "target": "5A", "tags": ["xref"]}, {"source": "2J", "target": "5B", "tags": ["xref"]}, {"source": "2J", "target": "5C", "tags": ["xref"]}, {"source": "2J", "target": "5E", "tags": ["xref"]}, {"source": "2J", "target": "6G", "tags": ["xref"]}, {"source": "2J", "target": "6H", "tags": ["xref"]}, {"source": "2J", "target": "8A", "tags": ["xref"]}, {"source": "2J", "target": "8B", "tags": ["xref"]}, {"source": "2J", "target": "8C", "tags": ["xref"]}, {"source": "2J", "target": "8D", "tags": ["xref"]}, {"source": "2J", "target": "8F", "tags": ["xref"]}, {"source": "2J", "target": "8G", "tags": ["xref"]}, {"source": "2J", "target": "8H", "tags": ["xref"]}, {"source": "2J", "target": "8I", "tags": ["xref"]}, {"source": "2J", "target": "8J", "tags": ["xref"]}, {"source": "2J", "target": "9A", "tags": ["xref"]}, {"source": "2J", "target": "9H", "tags": ["xref"]}, {"source": "2K", "target": "2D", "tags": ["xref"]}, {"source": "2K", "target": "2G", "tags": ["xref"]}, {"source": "2K", "target": "2H", "tags": ["xref"]}, {"source": "2K", "target": "2I", "tags": ["xref"]}, {"source": "2K", "target": "2J", "tags": ["xref"]}, {"source": "2K", "target": "3B", "tags": ["xref"]}, {"source": "2K", "target": "3F", "tags": ["xref"]}, {"source": "2K", "target": "3G", "tags": ["xref"]}, {"source": "2K", "target": "4C", "tags": ["xref"]}, {"source": "2K", "target": "4D", "tags": ["xref"]}, {"source": "2K", "target": "4E", "tags": ["xref"]}, {"source": "2K", "target": "5A", "tags": ["xref"]}, {"source": "2K", "target": "5B", "tags": ["xref"]}, {"source": "2K", "target": "5C", "tags": ["xref"]}, {"source": "2K", "target": "5E", "tags": ["xref"]}, {"source": "2K", "target": "6C", "tags": ["xref"]}, {"source": "2K", "target": "6G", "tags": ["xref"]}, {"source": "2K", "target": "6H", "tags": ["xref"]}, {"source": "2K", "target": "8A", "tags": ["xref"]}, {"source": "2K", "target": "8B", "tags": ["xref"]}, {"source": "2K", "target": "8C", "tags": ["xref"]}, {"source": "2K", "target": "8D", "tags": ["xref"]}, {"source": "2K", "target": "8F", "tags": ["xref"]}, {"source": "2K", "target": "8G", "tags": ["xref"]}, {"source": "2K", "target": "8H", "tags": ["xref"]}, {"source": "2K", "target": "8I", "tags": ["xref"]}, {"source": "2K", "target": "8J", "tags": ["xref"]}, {"source": "2K", "target": "8K", "tags": ["xref"]}, {"source": "2K", "target": "9A", "tags": ["xref"]}, {"source": "2K", "target": "9H", "tags": ["xref"]}, {"source": "3A", "target": "3B", "tags": ["xref"]}, {"source": "3A", "target": "3C", "tags": ["xref"]}, {"source": "3A", "target": "3E", "tags": ["xref"]}, {"source": "3A", "target": "3G", "tags": ["xref"]}, {"source": "3A", "target": "4C", "tags": ["xref"]}, {"source": "3A", "target": "4D", "tags": ["xref"]}, {"source": "3A", "target": "7D", "tags": ["xref"]}, {"source": "3A", "target": "8K", "tags": ["xref"]}, {"source": "3A", "target": "9A", "tags": ["xref"]}, {"source": "3A", "target": "9H", "tags": ["xref"]}, {"source": "3B", "target": "3C", "tags": ["xref"]}, {"source": "3B", "target": "3D", "tags": ["xref"]}, {"source": "3B", "target": "3E", "tags": ["xref"]}, {"source": "3B", "target": "3F", "tags": ["xref"]}, {"source": "3B", "target": "3G", "tags": ["xref"]}, {"source": "3B", "target": "4A", "tags": ["xref"]}, {"source": "3B", "target": "4B", "tags": ["xref"]}, {"source": "3B", "target": "4C", "tags": ["xref"]}, {"source": "3B", "target": "4D", "tags": ["xref"]}, {"source": "3B", "target": "4E", "tags": ["xref"]}, {"source": "3B", "target": "4F", "tags": ["xref"]}, {"source": "3B", "target": "5F", "tags": ["xref"]}, {"source": "3B", "target": "6B", "tags": ["xref"]}, {"source": "3B", "target": "6C", "tags": ["xref"]}, {"source": "3B", "target": "6D", "tags": ["xref"]}, {"source": "3B", "target": "6E", "tags": ["xref"]}, {"source": "3B", "target": "6F", "tags": ["xref"]}, {"source": "3B", "target": "6G", "tags": ["xref"]}, {"source": "3B", "target": "6H", "tags": ["xref"]}, {"source": "3B", "target": "6I", "tags": ["xref"]}, {"source": "3B", "target": "7C", "tags": ["xref"]}, {"source": "3B", "target": "7D", "tags": ["xref"]}, {"source": "3B", "target": "8K", "tags": ["xref"]}, {"source": "3B", "target": "9B", "tags": ["xref"]}, {"source": "3B", "target": "9C", "tags": ["xref"]}, {"source": "3B", "target": "9F", "tags": ["xref"]}, {"source": "3B", "target": "9H", "tags": ["xref"]}, {"source": "3B", "target": "9I", "tags": ["xref"]}, {"source": "3C", "target": "3D", "tags": ["xref"]}, {"source": "3C", "target": "3E", "tags": ["xref"]}, {"source": "3C", "target": "4B", "tags": ["xref"]}, {"source": "3C", "target": "4F", "tags": ["xref"]}, {"source": "3C", "target": "6B", "tags": ["xref"]}, {"source": "3C", "target": "6C", "tags": ["xref"]}, {"source": "3C", "target": "6D", "tags": ["xref"]}, {"source": "3C", "target": "6E", "tags": ["xref"]}, {"source": "3C", "target": "6H", "tags": ["xref"]}, {"source": "3C", "target": "7D", "tags": ["xref"]}, {"source": "3C", "target": "8K", "tags": ["xref"]}, {"source": "3C", "target": "8L", "tags": ["xref"]}, {"source": "3C", "target": "9C", "tags": ["xref"]}, {"source": "3C", "target": "9F", "tags": ["xref"]}, {"source": "3C", "target": "9G", "tags": ["xref"]}, {"source": "3C", "target": "9I", "tags": ["xref"]}, {"source": "3D", "target": "4A", "tags": ["xref"]}, {"source": "3D", "target": "4C", "tags": ["xref"]}, {"source": "3D", "target": "4D", "tags": ["xref"]}, {"source": "3D", "target": "4E", "tags": ["xref"]}, {"source": "3D", "target": "4F", "tags": ["xref"]}, {"source": "3D", "target": "6A", "tags": ["xref"]}, {"source": "3D", "target": "6B", "tags": ["xref"]}, {"source": "3D", "target": "6C", "tags": ["xref"]}, {"source": "3D", "target": "6D", "tags": ["xref"]}, {"source": "3D", "target": "6E", "tags": ["xref"]}, {"source": "3D", "target": "6H", "tags": ["xref"]}, {"source": "3D", "target": "6F", "tags": ["xref"]}, {"source": "3D", "target": "6G", "tags": ["xref"]}, {"source": "3D", "target": "8K", "tags": ["xref"]}, {"source": "3D", "target": "9B", "tags": ["xref"]}, {"source": "3D", "target": "9C", "tags": ["xref"]}, {"source": "3D", "target": "9F", "tags": ["xref"]}, {"source": "3E", "target": "3D", "tags": ["xref"]}, {"source": "3E", "target": "4C", "tags": ["xref"]}, {"source": "3E", "target": "4D", "tags": ["xref"]}, {"source": "3E", "target": "4E", "tags": ["xref"]}, {"source": "3E", "target": "4F", "tags": ["xref"]}, {"source": "3E", "target": "7C", "tags": ["xref"]}, {"source": "3F", "target": "3A", "tags": ["xref"]}, {"source": "3F", "target": "3C", "tags": ["xref"]}, {"source": "3F", "target": "3G", "tags": ["xref"]}, {"source": "3F", "target": "4B", "tags": ["xref"]}, {"source": "3F", "target": "4C", "tags": ["xref"]}, {"source": "3F", "target": "4D", "tags": ["xref"]}, {"source": "3F", "target": "4E", "tags": ["xref"]}, {"source": "3F", "target": "4F", "tags": ["xref"]}, {"source": "3F", "target": "6C", "tags": ["xref"]}, {"source": "3F", "target": "6D", "tags": ["xref"]}, {"source": "3F", "target": "6E", "tags": ["xref"]}, {"source": "3F", "target": "6F", "tags": ["xref"]}, {"source": "3F", "target": "6G", "tags": ["xref"]}, {"source": "3F", "target": "7B", "tags": ["xref"]}, {"source": "3F", "target": "7D", "tags": ["xref"]}, {"source": "3F", "target": "9H", "tags": ["xref"]}, {"source": "3G", "target": "3C", "tags": ["xref"]}, {"source": "3G", "target": "4C", "tags": ["xref"]}, {"source": "3G", "target": "4D", "tags": ["xref"]}, {"source": "3G", "target": "4E", "tags": ["xref"]}, {"source": "4A", "target": "4B", "tags": ["xref"]}, {"source": "4A", "target": "4D", "tags": ["xref"]}, {"source": "4A", "target": "4E", "tags": ["xref"]}, {"source": "4A", "target": "5F", "tags": ["xref"]}, {"source": "4A", "target": "6B", "tags": ["xref"]}, {"source": "4A", "target": "6C", "tags": ["xref"]}, {"source": "4A", "target": "6E", "tags": ["xref"]}, {"source": "4A", "target": "6F", "tags": ["xref"]}, {"source": "4A", "target": "6G", "tags": ["xref"]}, {"source": "4A", "target": "6H", "tags": ["xref"]}, {"source": "4A", "target": "9G", "tags": ["xref"]}, {"source": "4A", "target": "9I", "tags": ["xref"]}, {"source": "4B", "target": "4C", "tags": ["xref"]}, {"source": "4B", "target": "4D", "tags": ["xref"]}, {"source": "4B", "target": "4E", "tags": ["xref"]}, {"source": "4B", "target": "5F", "tags": ["xref"]}, {"source": "4B", "target": "6B", "tags": ["xref"]}, {"source": "4B", "target": "6C", "tags": ["xref"]}, {"source": "4B", "target": "6D", "tags": ["xref"]}, {"source": "4B", "target": "6E", "tags": ["xref"]}, {"source": "4B", "target": "6F", "tags": ["xref"]}, {"source": "4B", "target": "6G", "tags": ["xref"]}, {"source": "4B", "target": "6H", "tags": ["xref"]}, {"source": "4B", "target": "9G", "tags": ["xref"]}, {"source": "4B", "target": "9I", "tags": ["xref"]}, {"source": "4C", "target": "4A", "tags": ["xref"]}, {"source": "4C", "target": "4D", "tags": ["xref"]}, {"source": "4C", "target": "4E", "tags": ["xref"]}, {"source": "4C", "target": "4F", "tags": ["xref"]}, {"source": "4C", "target": "6B", "tags": ["xref"]}, {"source": "4C", "target": "6D", "tags": ["xref"]}, {"source": "4C", "target": "6E", "tags": ["xref"]}, {"source": "4C", "target": "6H", "tags": ["xref"]}, {"source": "4C", "target": "9A", "tags": ["xref"]}, {"source": "4C", "target": "9C", "tags": ["xref"]}, {"source": "4C", "target": "9D", "tags": ["xref"]}, {"source": "4C", "target": "9E", "tags": ["xref"]}, {"source": "4C", "target": "9F", "tags": ["xref"]}, {"source": "4C", "target": "9G", "tags": ["xref"]}, {"source": "4C", "target": "9H", "tags": ["xref"]}, {"source": "4C", "target": "9I", "tags": ["xref"]}, {"source": "4D", "target": "4E", "tags": ["xref"]}, {"source": "4D", "target": "4F", "tags": ["xref"]}, {"source": "4D", "target": "6B", "tags": ["xref"]}, {"source": "4D", "target": "6D", "tags": ["xref"]}, {"source": "4D", "target": "6E", "tags": ["xref"]}, {"source": "4D", "target": "6H", "tags": ["xref"]}, {"source": "4D", "target": "8D", "tags": ["xref"]}, {"source": "4D", "target": "8F", "tags": ["xref"]}, {"source": "4D", "target": "8J", "tags": ["xref"]}, {"source": "4D", "target": "8K", "tags": ["xref"]}, {"source": "4D", "target": "9A", "tags": ["xref"]}, {"source": "4D", "target": "9C", "tags": ["xref"]}, {"source": "4D", "target": "9D", "tags": ["xref"]}, {"source": "4D", "target": "9E", "tags": ["xref"]}, {"source": "4D", "target": "9F", "tags": ["xref"]}, {"source": "4D", "target": "9G", "tags": ["xref"]}, {"source": "4D", "target": "9H", "tags": ["xref"]}, {"source": "4D", "target": "9I", "tags": ["xref"]}, {"source": "4E", "target": "4E", "tags": ["xref"]}, {"source": "4E", "target": "4F", "tags": ["xref"]}, {"source": "4E", "target": "6B", "tags": ["xref"]}, {"source": "4E", "target": "6D", "tags": ["xref"]}, {"source": "4E", "target": "6E", "tags": ["xref"]}, {"source": "4E", "target": "6H", "tags": ["xref"]}, {"source": "4E", "target": "8C", "tags": ["xref"]}, {"source": "4E", "target": "8D", "tags": ["xref"]}, {"source": "4E", "target": "8F", "tags": ["xref"]}, {"source": "4E", "target": "8J", "tags": ["xref"]}, {"source": "4E", "target": "8K", "tags": ["xref"]}, {"source": "4E", "target": "9A", "tags": ["xref"]}, {"source": "4E", "target": "9C", "tags": ["xref"]}, {"source": "4E", "target": "9D", "tags": ["xref"]}, {"source": "4E", "target": "9E", "tags": ["xref"]}, {"source": "4E", "target": "9F", "tags": ["xref"]}, {"source": "4E", "target": "9G", "tags": ["xref"]}, {"source": "4E", "target": "9H", "tags": ["xref"]}, {"source": "4E", "target": "9I", "tags": ["xref"]}, {"source": "4F", "target": "5C", "tags": ["xref"]}, {"source": "5A", "target": "5D", "tags": ["xref"]}, {"source": "5A", "target": "5E", "tags": ["xref"]}, {"source": "5A", "target": "6E", "tags": ["xref"]}, {"source": "5A", "target": "6F", "tags": ["xref"]}, {"source": "5A", "target": "6G", "tags": ["xref"]}, {"source": "5A", "target": "6H", "tags": ["xref"]}, {"source": "5A", "target": "6I", "tags": ["xref"]}, {"source": "5A", "target": "7F", "tags": ["xref"]}, {"source": "5A", "target": "7G", "tags": ["xref"]}, {"source": "5A", "target": "8N", "tags": ["xref"]}, {"source": "5B", "target": "5D", "tags": ["xref"]}, {"source": "5B", "target": "5E", "tags": ["xref"]}, {"source": "5B", "target": "5F", "tags": ["xref"]}, {"source": "5B", "target": "6E", "tags": ["xref"]}, {"source": "5B", "target": "6F", "tags": ["xref"]}, {"source": "5B", "target": "6G", "tags": ["xref"]}, {"source": "5B", "target": "6I", "tags": ["xref"]}, {"source": "5C", "target": "5D", "tags": ["xref"]}, {"source": "5C", "target": "5E", "tags": ["xref"]}, {"source": "5C", "target": "5F", "tags": ["xref"]}, {"source": "5D", "target": "5E", "tags": ["xref"]}, {"source": "5D", "target": "5F", "tags": ["xref"]}, {"source": "5D", "target": "6H", "tags": ["xref"]}, {"source": "5D", "target": "7F", "tags": ["xref"]}, {"source": "5D", "target": "7G", "tags": ["xref"]}, {"source": "5D", "target": "8N", "tags": ["xref"]}, {"source": "5E", "target": "5E", "tags": ["xref"]}, {"source": "5E", "target": "5F", "tags": ["xref"]}, {"source": "5E", "target": "6H", "tags": ["xref"]}, {"source": "5E", "target": "7F", "tags": ["xref"]}, {"source": "5E", "target": "7G", "tags": ["xref"]}, {"source": "5E", "target": "8N", "tags": ["xref"]}, {"source": "5F", "target": "6E", "tags": ["xref"]}, {"source": "5F", "target": "6F", "tags": ["xref"]}, {"source": "5F", "target": "6G", "tags": ["xref"]}, {"source": "5F", "target": "6H", "tags": ["xref"]}, {"source": "5F", "target": "7G", "tags": ["xref"]}, {"source": "6A", "target": "6B", "tags": ["xref"]}, {"source": "6A", "target": "6C", "tags": ["xref"]}, {"source": "6A", "target": "6D", "tags": ["xref"]}, {"source": "6A", "target": "6E", "tags": ["xref"]}, {"source": "6A", "target": "6F", "tags": ["xref"]}, {"source": "6A", "target": "6G", "tags": ["xref"]}, {"source": "6A", "target": "6H", "tags": ["xref"]}, {"source": "6A", "target": "6I", "tags": ["xref"]}, {"source": "6B", "target": "6C", "tags": ["xref"]}, {"source": "6B", "target": "6D", "tags": ["xref"]}, {"source": "6B", "target": "6E", "tags": ["xref"]}, {"source": "6B", "target": "6F", "tags": ["xref"]}, {"source": "6B", "target": "6G", "tags": ["xref"]}, {"source": "6B", "target": "6H", "tags": ["xref"]}, {"source": "6B", "target": "6I", "tags": ["xref"]}, {"source": "6C", "target": "6E", "tags": ["xref"]}, {"source": "6C", "target": "6F", "tags": ["xref"]}, {"source": "6C", "target": "6G", "tags": ["xref"]}, {"source": "6C", "target": "6H", "tags": ["xref"]}, {"source": "6C", "target": "6I", "tags": ["xref"]}, {"source": "6C", "target": "8K", "tags": ["xref"]}, {"source": "6D", "target": "6E", "tags": ["xref"]}, {"source": "6D", "target": "6F", "tags": ["xref"]}, {"source": "6D", "target": "6G", "tags": ["xref"]}, {"source": "6D", "target": "6H", "tags": ["xref"]}, {"source": "6D", "target": "6I", "tags": ["xref"]}, {"source": "6E", "target": "6F", "tags": ["xref"]}, {"source": "6E", "target": "6G", "tags": ["xref"]}, {"source": "6E", "target": "6H", "tags": ["xref"]}, {"source": "6E", "target": "6I", "tags": ["xref"]}, {"source": "6F", "target": "6G", "tags": ["xref"]}, {"source": "6F", "target": "6H", "tags": ["xref"]}, {"source": "6F", "target": "6I", "tags": ["xref"]}, {"source": "6G", "target": "6H", "tags": ["xref"]}, {"source": "6G", "target": "6I", "tags": ["xref"]}, {"source": "6H", "target": "6I", "tags": ["xref"]}, {"source": "7A", "target": "7B", "tags": ["xref"]}, {"source": "7A", "target": "7D", "tags": ["xref"]}, {"source": "7A", "target": "7E", "tags": ["xref"]}, {"source": "7A", "target": "7G", "tags": ["xref"]}, {"source": "7A", "target": "10D", "tags": ["xref"]}, {"source": "7A", "target": "10E", "tags": ["xref"]}, {"source": "7B", "target": "7D", "tags": ["xref"]}, {"source": "7B", "target": "7E", "tags": ["xref"]}, {"source": "7B", "target": "10B", "tags": ["xref"]}, {"source": "7B", "target": "10D", "tags": ["xref"]}, {"source": "7C", "target": "7D", "tags": ["xref"]}, {"source": "7C", "target": "7E", "tags": ["xref"]}, {"source": "7C", "target": "7F", "tags": ["xref"]}, {"source": "7C", "target": "7G", "tags": ["xref"]}, {"source": "7C", "target": "10E", "tags": ["xref"]}, {"source": "7D", "target": "10E", "tags": ["xref"]}, {"source": "7E", "target": "7F", "tags": ["xref"]}, {"source": "7E", "target": "7G", "tags": ["xref"]}, {"source": "7E", "target": "10E", "tags": ["xref"]}, {"source": "7F", "target": "7D", "tags": ["xref"]}, {"source": "7F", "target": "7G", "tags": ["xref"]}, {"source": "7F", "target": "10E", "tags": ["xref"]}, {"source": "7G", "target": "10E", "tags": ["xref"]}, {"source": "8A", "target": "8B", "tags": ["xref"]}, {"source": "8A", "target": "8C", "tags": ["xref"]}, {"source": "8A", "target": "8E", "tags": ["xref"]}, {"source": "8A", "target": "8G", "tags": ["xref"]}, {"source": "8A", "target": "8H", "tags": ["xref"]}, {"source": "8B", "target": "8C", "tags": ["xref"]}, {"source": "8B", "target": "8D", "tags": ["xref"]}, {"source": "8B", "target": "8E", "tags": ["xref"]}, {"source": "8B", "target": "8G", "tags": ["xref"]}, {"source": "8B", "target": "8H", "tags": ["xref"]}, {"source": "8B", "target": "8I", "tags": ["xref"]}, {"source": "8B", "target": "8J", "tags": ["xref"]}, {"source": "8B", "target": "8N", "tags": ["xref"]}, {"source": "8B", "target": "10A", "tags": ["xref"]}, {"source": "8B", "target": "10B", "tags": ["xref"]}, {"source": "8B", "target": "10C", "tags": ["xref"]}, {"source": "8C", "target": "8D", "tags": ["xref"]}, {"source": "8C", "target": "8E", "tags": ["xref"]}, {"source": "8C", "target": "8F", "tags": ["xref"]}, {"source": "8C", "target": "8G", "tags": ["xref"]}, {"source": "8C", "target": "8H", "tags": ["xref"]}, {"source": "8C", "target": "8I", "tags": ["xref"]}, {"source": "8C", "target": "9A", "tags": ["xref"]}, {"source": "8C", "target": "9D", "tags": ["xref"]}, {"source": "8C", "target": "9G", "tags": ["xref"]}, {"source": "8D", "target": "8E", "tags": ["xref"]}, {"source": "8D", "target": "8F", "tags": ["xref"]}, {"source": "8D", "target": "8G", "tags": ["xref"]}, {"source": "8D", "target": "8H", "tags": ["xref"]}, {"source": "8D", "target": "9A", "tags": ["xref"]}, {"source": "8D", "target": "9G", "tags": ["xref"]}, {"source": "8D", "target": "9H", "tags": ["xref"]}, {"source": "8E", "target": "8G", "tags": ["xref"]}, {"source": "8E", "target": "8H", "tags": ["xref"]}, {"source": "8E", "target": "8J", "tags": ["xref"]}, {"source": "8E", "target": "8N", "tags": ["xref"]}, {"source": "8E", "target": "10E", "tags": ["xref"]}, {"source": "8F", "target": "8G", "tags": ["xref"]}, {"source": "8F", "target": "8H", "tags": ["xref"]}, {"source": "8F", "target": "8I", "tags": ["xref"]}, {"source": "8F", "target": "9G", "tags": ["xref"]}, {"source": "8F", "target": "9H", "tags": ["xref"]}, {"source": "8G", "target": "8H", "tags": ["xref"]}, {"source": "8I", "target": "8E", "tags": ["xref"]}, {"source": "8I", "target": "8J", "tags": ["xref"]}, {"source": "8J", "target": "8K", "tags": ["xref"]}, {"source": "8L", "target": "8M", "tags": ["xref"]}, {"source": "8M", "target": "8N", "tags": ["xref"]}, {"source": "8M", "target": "8O", "tags": ["xref"]}, {"source": "8M", "target": "9A", "tags": ["xref"]}, {"source": "8M", "target": "9G", "tags": ["xref"]}, {"source": "8M", "target": "10C", "tags": ["xref"]}, {"source": "8M", "target": "10D", "tags": ["xref"]}, {"source": "8M", "target": "10E", "tags": ["xref"]}, {"source": "8N", "target": "8O", "tags": ["xref"]}, {"source": "8O", "target": "8O", "tags": ["xref"]}, {"source": "8O", "target": "9A", "tags": ["xref"]}, {"source": "8O", "target": "9G", "tags": ["xref"]}, {"source": "8O", "target": "10C", "tags": ["xref"]}, {"source": "8O", "target": "10D", "tags": ["xref"]}, {"source": "8O", "target": "10E", "tags": ["xref"]}, {"source": "9A", "target": "9B", "tags": ["xref"]}, {"source": "9A", "target": "9C", "tags": ["xref"]}, {"source": "9A", "target": "9D", "tags": ["xref"]}, {"source": "9A", "target": "9G", "tags": ["xref"]}, {"source": "9A", "target": "9I", "tags": ["xref"]}, {"source": "9B", "target": "9C", "tags": ["xref"]}, {"source": "9B", "target": "9D", "tags": ["xref"]}, {"source": "9B", "target": "9E", "tags": ["xref"]}, {"source": "9B", "target": "9F", "tags": ["xref"]}, {"source": "9B", "target": "9G", "tags": ["xref"]}, {"source": "9B", "target": "9I", "tags": ["xref"]}, {"source": "9C", "target": "9F", "tags": ["xref"]}, {"source": "9C", "target": "9G", "tags": ["xref"]}, {"source": "9C", "target": "9I", "tags": ["xref"]}, {"source": "9D", "target": "9E", "tags": ["xref"]}, {"source": "9D", "target": "9G", "tags": ["xref"]}, {"source": "9D", "target": "9I", "tags": ["xref"]}, {"source": "9E", "target": "9G", "tags": ["xref"]}, {"source": "9E", "target": "9I", "tags": ["xref"]}, {"source": "9F", "target": "9G", "tags": ["xref"]}, {"source": "9F", "target": "9I", "tags": ["xref"]}, {"source": "9G", "target": "9H", "tags": ["xref"]}, {"source": "9G", "target": "9I", "tags": ["xref"]}, {"source": "9H", "target": "9I", "tags": ["xref"]}, {"source": "9I", "target": "9I", "tags": ["xref"]}]}</script>
<script>
// ===== Helper: ensure we can compute tags and find nodes by id safely =====
(function(){
    // links/nodes should already exist in the page script; if not, derive from the JSON script tag
    try {
        if (typeof links === 'undefined' || typeof nodes === 'undefined') {
            const raw = document.getElementById('graph-data')?.textContent ?? '{}';
            const data = JSON.parse(raw);
            window.nodes = data.nodes || [];
            window.links = data.links || [];
        }
    } catch(e) {}

    // Compute allTags if missing
    if (typeof allTags === 'undefined') {
        const tagSet = new Set();
        (window.links || []).forEach(l => (l.tags || []).forEach(t => t && tagSet.add(t)));
        window.allTags = Array.from(tagSet).sort();
    }

    // Fast id->node map
    window.__nodeById = new Map((window.nodes || []).map(n => [n.id, n]));

    window.getTagsForNode = function(id){
        const s = new Set();
        (window.links || []).forEach(l => {
            if (!l || !l.tags) return;
            if (l.source === id || l.target === id || (l.source && l.source.id === id) || (l.target && l.target.id === id)) {
                l.tags.forEach(t => t && s.add(t));
            }
        });
        return Array.from(s).sort();
    };

    window.populateReviewSelect = function(tags){
        const sel = document.getElementById('reviewTagSelect');
        if (!sel) return;
        const opts = (tags && tags.length ? tags : []);
        sel.innerHTML = '<option value=\"\">— pick concept —</option>' + opts.map(t=>`<option value=\"${t}\">${t}</option>`).join('');
        sel.disabled = opts.length === 0;
    };

    window.populateHighlightSelect = function(tags){
        const sel = document.getElementById('highlightTagSelect');
        if (!sel) return;
        const opts = (tags && tags.length ? tags : []);
        sel.innerHTML = '<option value=\"\">— pick concept —</option>' + opts.map(t=>`<option value=\"${t}\">${t}</option>`).join('');
    };

    // Initialize highlight select with all tags
    populateHighlightSelect(window.allTags || []);
})();
</script>

<script>
const data = JSON.parse(document.getElementById('graph-data').textContent);
const nodeById = new Map(data.nodes.map(n => [n.id, n]));
const adj = new Map();
data.nodes.forEach(n => adj.set(n.id, new Set()));
data.links.forEach(l => { adj.get(l.source).add(l.target); adj.get(l.target).add(l.source); });
// Degree-based node sizing (linear scale)
const degree = new Map(data.nodes.map(n => [n.id, 0]));
data.links.forEach(l => {
    degree.set(l.source, (degree.get(l.source)||0) + 1);
    degree.set(l.target, (degree.get(l.target)||0) + 1);
});
const degVals = Array.from(degree.values());
const degMin = d3.min(degVals) || 0;
const degMax = d3.max(degVals) || 1;
let sizeScaleFactor = 1.0;
const minR = 8, maxR = 26;
const domainMin = degMin;
const domainMax = (degMax === degMin) ? degMin + 1 : degMax;
const sizeScale = d3.scaleLinear().domain([domainMin, domainMax]).range([minR, maxR]);
data.nodes.forEach(n => { n.r = sizeScale(degree.get(n.id)); });

// Build edge->tags map and allTags list
const edgeTags = new Map();
function linkKey(l) {
    const s = typeof l.source === 'string' ? l.source : l.source.id;
    const t = typeof l.target === 'string' ? l.target : l.target.id;
    return [s, t].sort().join('|');
}
data.links.forEach(l => {
    const k = linkKey(l);
    edgeTags.set(k, (l.tags||[]).map(x => x.trim()).filter(Boolean));
});
const allTags = Array.from(new Set([].concat(...Array.from(edgeTags.values())))).sort();

function populateTagSelect(tags){
    const sel = document.getElementById('tagSelect');
    if (!sel) return;
    const opts = (tags && tags.length ? tags : allTags).slice().sort();
    sel.innerHTML = '<option value="">— pick concept —</option>' + opts.map(t=>`<option value="${t}">${t}</option>`).join('');
}
// initial population
populateTagSelect(allTags);


// Hook up size slider if present
const sizeInput = document.getElementById('sizeScale');
if (sizeInput) {
    sizeInput.addEventListener('input', (e) => {
        sizeScaleFactor = +e.target.value;
        data.nodes.forEach(n => { n.r = sizeScale(degree.get(n.id)) * sizeScaleFactor; });
        d3.selectAll('.node circle:not(.hoverring)').attr('r', d => d.r);
        d3.selectAll('.node .hoverring').attr('r', d => Math.max(12, d.r + 3));
        simulation.force('collide', d3.forceCollide().radius(d => d.r + 6));
        simulation.alpha(0.2).restart();
    });
}

// Populate tag selector
const tagSelect = document.getElementById('tagSelect');
if (tagSelect){
    tagSelect.innerHTML = '<option value="">— pick concept —</option>' + allTags.map(t=>`<option value="${t}">${t}</option>`).join('');
}

// Review path logic
selectedId = null;

function computeReviewPath(startId, tag){
    if (!startId || !tag) return [];
    const start = nodeById.get(startId);
    if (!start) return [];
    const visited = new Set([startId]);
    const parent = new Map();
    const q = [startId];
    let best = startId;
    while (q.length){
        const cur = q.shift();
        const curNode = nodeById.get(cur);
        // Consider neighbors that are earlier modules and share the tag on the edge
        const nbrs = Array.from(adj.get(cur) || []);
        for (const nb of nbrs){
            if (visited.has(nb)) continue;
            const nbNode = nodeById.get(nb);
            if (!nbNode) continue;
            if (nbNode.module_num >= curNode.module_num) continue; // strictly earlier
            const key = [cur, nb].sort().join('|');
            const tags = edgeTags.get(key) || [];
            if (!tags.includes(tag)) continue;
            visited.add(nb);
            parent.set(nb, cur);
            q.push(nb);
            // track the earliest reachable
            if (nbNode.module_num < nodeById.get(best).module_num){
                best = nb;
            }
        }
    }
    // reconstruct path to 'best'
    const path = [];
    let walk = best;
    while (walk){
        path.unshift(walk);
        if (walk === startId) break;
        walk = parent.get(walk);
    }
    // if no movement happened, path may be just [start]
    return path;
}

function clearReview(){
    d3.selectAll('.node').classed('review-dim', false).classed('review-path', false);
    d3.selectAll('.link').classed('review-dim', false).classed('review-path', false);
    // Clear legend section
    const sec = d3.select('#globalLegend .review-section');
    if (sec.size()) sec.html('');
}


// Tag highlight utilities
function nodesForTag(tag){
    const out = new Set();
    edgeTags.forEach((tags, key) => {
        if (tags.includes(tag)){
            const [a,b] = key.split('|');
            out.add(a); out.add(b);
        }
    });
    return out;
}
function clearTagHighlight(){
    d3.selectAll('.node').classed('tag-on', false).classed('tag-dim', false);
    d3.selectAll('.link').classed('tag-on', false).classed('tag-dim', false);
}
function applyTagHighlight(tag){
    clearTagHighlight();
    if (!tag) return;
    const nset = nodesForTag(tag);
    // dim everything
    d3.selectAll('.node').classed('tag-dim', true);
    d3.selectAll('.link').classed('tag-dim', true);
    // bring on nodes
    g.selectAll('.node').filter(d => nset.has(d.id)).classed('tag-dim', false).classed('tag-on', true);
    // links with tag back on
    g.selectAll('.link').filter(l => {
        const s = (typeof l.source === 'string') ? l.source : l.source.id;
        const t = (typeof l.target === 'string') ? l.target : l.target.id;
        const key = [s,t].sort().join('|');
        const tags = edgeTags.get(key) || [];
        return tags.includes(tag);
    }).classed('tag-dim', false).classed('tag-on', true);
    // 
}

function applyReview(pathIds, tag){
    // Cache selections for efficiency
    const nodeSel = g.selectAll('.node');
    const linkSel = g.selectAll('.link');

    // dim everything
    nodeSel.classed('review-dim', true);
    linkSel.classed('review-dim', true);

    // mark nodes in path
    const setIds = new Set(pathIds);
    nodeSel
        .filter(d => setIds.has(d.id))
        .classed('review-dim', false)
        .classed('review-path', true);
        
    // mark links that are consecutive along path
    const linkKeysInPath = new Set();
    for (let i=0;i<pathIds.length-1;i++){
        linkKeysInPath.add([pathIds[i], pathIds[i+1]].sort().join('|'));
    }
    g.selectAll('.link')
        .filter(l => {
            const s = (typeof l.source === 'string') ? l.source : l.source.id;
            const t = (typeof l.target === 'string') ? l.target : l.target.id;
            return linkKeysInPath.has([s,t].sort().join('|'));
        })
        .classed('review-dim', false)
        .classed('review-path', true);

    // Update legend section
    const sec = d3.select('#globalLegend .review-section');
    if (sec.size()){
        const start = nodeById.get(pathIds[0]);
        sec.html(`
            <div class="review-header">Review Path</div>
            <div class="small">Start: <b>${start.id}</b> (${start.module_title})</div>
            <div class="small">Tag: <b>${tag}</b></div>
            <div class="small" style="margin-top:6px; opacity:0.85;">Steps:</div>
            <div class="review-steps"></div>
        `);
        const stepsDiv = sec.select('.review-steps');
        pathIds.forEach(pid => {
            const node = nodeById.get(pid);
            const row = stepsDiv.append('div').attr('class','review-step');
            row.html(`<span class="step-id" style="color:${node.color}">${pid}</span> <span class="step-desc">${node.description}</span>`);
        });
    }
}

// Connect review controls
const reviewBtn = document.getElementById('reviewBtn');
const clearBtn = document.getElementById('clearReviewBtn');
if (reviewBtn) {
    reviewBtn.addEventListener('click', ()=>{
        const reviewSel = document.getElementById('reviewTagSelect');
        const tag = reviewSel ? reviewSel.value : '';
        if (!selectedId || !tag) return;
        const path = computeReviewPath(selectedId, tag);
        clearReview();
        if (path.length){
            applyReview(path, tag);
        }
    });
}
if (clearBtn){
    clearBtn.addEventListener('click', ()=> { 
        // Full reset of all states
        // Clear review path
        clearReview(); 
        
        // Clear tag highlights
        clearTagHighlight(); 
        
        // Remove selection
        selectedId = null;
        g.selectAll('.node').classed('selected', false).classed('dim', false);
        g.selectAll('.link').classed('dim', false).classed('highlight', false)
                            .classed('forward', false).classed('backward', false)
                            .style('stroke', null);
        
        // Clear hover effects
        d3.selectAll('.node .hoverring').attr('opacity', 0);
        
        // Reset link visibility
        
// Collapsible module legend
(function(){
  const lg = document.getElementById('globalLegend');
  const btn = document.getElementById('legendToggle');
  if(!lg || !btn) return;
  btn.addEventListener('click', () => {
    lg.classList.toggle('collapsed');
    btn.textContent = lg.classList.contains('collapsed') ? 'Show' : 'Hide';
  });
})();

applyBaseLinkVisibility();
        
        // Update button states
        updateReviewButtonState();
        
        // Clear details panel
        const details = document.getElementById('details');
        if (details) details.innerHTML = '<div class="small">No node selected.</div>';
        
        // Reset dropdowns
        if (typeof populateTagSelect === 'function') { 
            populateTagSelect(allTags);
        }
        if (typeof populateReviewSelect === 'function') {
            populateReviewSelect([]);
        }
        
        // Reset highlight select if it exists
        const highlightSel = document.getElementById('highlightTagSelect');
        if (highlightSel) {
            highlightSel.selectedIndex = 0;
        }
        
        // Reset review select if it exists
        const reviewSel = document.getElementById('reviewTagSelect');
        if (reviewSel) {
            reviewSel.selectedIndex = 0;
        }
    });
}
const highlightBtn = document.getElementById('highlightTagBtn');

function updateReviewButtonState(){
    const reviewSel = document.getElementById('reviewTagSelect');
    const hasNode = !!selectedId;
    const hasTag = !!(reviewSel && reviewSel.value);
    if (reviewBtn) reviewBtn.disabled = !(hasNode && hasTag);
}

// Initial state
if (typeof selectedId === 'undefined') { var selectedId = null; }
if (reviewBtn) reviewBtn.disabled = true;

// React to dropdown changes
(function(){
    const reviewSelEl = document.getElementById('reviewTagSelect');
    if (reviewSelEl){
        reviewSelEl.addEventListener('change', updateReviewButtonState);
    }
})();
if (highlightBtn){
    highlightBtn.addEventListener('click', ()=>{
        const highlightSel = document.getElementById('highlightTagSelect');
        const tag = highlightSel ? highlightSel.value : '';
        if (!tag) return; applyTagHighlight(tag);
    });
}

const svg = d3.select('#viz');
let width = +svg.attr('width'), height = +svg.attr('height');
const g = svg.append('g');



function resizeCanvas(){
    const panel = document.getElementById('panel');
    const panelW = panel ? panel.offsetWidth : 0;
    width = Math.max(320, window.innerWidth - panelW);
    height = window.innerHeight;
    svg.attr('width', width).attr('height', height);
    simulation && simulation.force('center', d3.forceCenter(width/2, height/2));
}
window.addEventListener('resize', resizeCanvas);

const zoom = d3.zoom().scaleExtent([0.4, 2.5]).on('zoom', (e)=> g.attr('transform', e.transform));
svg.call(zoom);

// click blank space to clear selection
svg.on('click', (e)=>{
    // ignore if clicking on a node or pill
    if (e.target && (e.target.closest && (e.target.closest('.node') || e.target.closest('.edge-pill')))) return;
    selectedId = null;
    g.selectAll('.node').classed('selected', false);
    const details = document.getElementById('details');
    if (details) details.innerHTML = '<div class="small">No node selected.</div>';
    if (typeof populateTagSelect === 'function') { populateTagSelect(allTags); clearHighlight(); }
    if (typeof populateReviewSelect === 'function') { populateReviewSelect([]); }
    updateReviewButtonState();
});


// links
let link = g.append('g').attr('class','links')
    .attr('stroke-linecap','round')
    .selectAll('line')
    .data(data.links)
    .enter().append('line')
    .attr('class','link');

// nodes
const node = g.selectAll('.node')
    .data(data.nodes, d => d.id)
    .enter()
    .append('g')
    .attr('class', 'node')
    .call(d3.drag()
        .on('start', (e,d) => { if (layoutMode==='proximity' && !e.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; })
        .on('drag', (e,d) => { d.fx = e.x; d.fy = e.y; })
        .on('end',  (e,d) => { if (layoutMode==='proximity' && !e.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; })
    );

node.append('circle')
    .attr('class','hoverring')
    .attr('r', d => Math.max(12, d.r + 3))
    .attr('fill', 'none')
    .attr('stroke', '#ff3b30')
    .attr('stroke-width', 2)
    .attr('opacity', 0);

node.append('circle')
    .attr('class','core')
    .attr('r', d => d.r)
    .attr('fill', d => d.color)
    .attr('stroke', '#0b1020')
    .attr('stroke-width', 1.5);

node.append('text')
    .attr('class','label')
    .attr('text-anchor','middle')
    .attr('dy', 3.5)
    .text(d => d.id);

// --- Selection logic: click to select, click canvas to deselect ---
node.on('click', (e, d) => {
    selectedId = d.id;
    g.selectAll('.node').classed('selected', n => n.id === selectedId);
    highlight(selectedId);
    showDetails(selectedId);
    // update review tag select with only the node's tags
    if (typeof getTagsForNode === 'function' && typeof populateReviewSelect === 'function') {
        const nodeTags = getTagsForNode(selectedId);
        populateReviewSelect(nodeTags);
    }
    updateReviewButtonState();
    e.stopPropagation();
});

// Remove hover effects - only show info on click
// node.on('mouseenter', (e,d)=> { if (!selectedId) highlight(d.id); });
// node.on('mouseleave', (e,d)=> { if (!selectedId) { clearHighlight(); } else { highlight(selectedId); } });

// Simulation
let spacing = 1.35;
let layoutMode = 'proximity';
const simulation = d3.forceSimulation(data.nodes)
    .force('link', d3.forceLink(data.links).id(d=>d.id).distance(l=>linkDistance(l)).strength(l=>linkStrength(l)))
    .force('charge', d3.forceManyBody().strength(d => -1 * spacing * (120 + d.r*3)))
    .force('center', d3.forceCenter(width/2, height/2))
    .force('collide', d3.forceCollide().radius(d => d.r + 6).iterations(2))
    .alphaDecay(0.03);
resizeCanvas();

function linkDistance(l){
    const a = (typeof l.source === 'string') ? nodeById.get(l.source) : l.source;
    const b = (typeof l.target === 'string') ? nodeById.get(l.target) : l.target;
    const gap = Math.abs(a.module_num - b.module_num);
    const base = (gap === 0 ? 70 : 120 + 20*gap);
    return base * spacing;
}
function linkStrength(l){
    const a = (typeof l.source === 'string') ? nodeById.get(l.source) : l.source;
    const b = (typeof l.target === 'string') ? nodeById.get(l.target) : l.target;
    const gap = Math.abs(a.module_num - b.module_num);
    return (gap === 0 ? 0.9 : 0.25/(0.5 + 0.5*gap));
}

simulation.on('tick', ()=> {
    if (layoutMode==='proximity'){
        node.attr('transform', d => `translate(${d.x},${d.y})`);
        link
            .attr('x1', d => (typeof d.source === 'string' ? nodeById.get(d.source).x : d.source.x))
            .attr('y1', d => (typeof d.source === 'string' ? nodeById.get(d.source).y : d.source.y))
            .attr('x2', d => (typeof d.target === 'string' ? nodeById.get(d.target).x : d.target.x))
            .attr('y2', d => (typeof d.target === 'string' ? nodeById.get(d.target).y : d.target.y));
    }
});

// start near rings
data.nodes.forEach(n => { n.x = n.rx; n.y = n.ry; });
simulation.alpha(0.9).restart();

// Spacing
document.getElementById('spacing').addEventListener('input', (e)=> {
    spacing = parseFloat(e.target.value);
    simulation.force('charge', d3.forceManyBody().strength(d => -1 * spacing * (120 + d.r*3)))
                        .force('link').distance(l => linkDistance(l));
    if (layoutMode==='proximity'){ simulation.alpha(0.6).restart(); }
});

// Link filter
let linkFilter = 'all';
document.getElementById('linkMode').addEventListener('change', (e)=> { linkFilter = e.target.value; clearHighlight(); });
function applyBaseLinkVisibility(){ link.classed('hidden', linkFilter !== 'all'); }

// Layout toggle
document.getElementById('layoutMode').addEventListener('change', (e)=> {
    layoutMode = e.target.value;
    if (layoutMode === 'rings'){
        simulation.stop();
        data.nodes.forEach(n => { n.x = n.rx; n.y = n.ry; n.fx = null; n.fy = null; });
        svg.transition().duration(300).call(zoom.transform, d3.zoomIdentity);
        node.transition().duration(300).attr('transform', d => `translate(${d.rx},${d.ry})`);
        link.transition().duration(300)
            .attr('x1', d => (typeof d.source === 'string' ? nodeById.get(d.source).rx : d.source.rx))
            .attr('y1', d => (typeof d.source === 'string' ? nodeById.get(d.source).ry : d.source.ry))
            .attr('x2', d => (typeof d.target === 'string' ? nodeById.get(d.target).rx : d.target.rx))
            .attr('y2', d => (typeof d.target === 'string' ? nodeById.get(d.target).ry : d.target.ry));
    } else if (layoutMode === 'stacked'){
        simulation.stop();
        data.nodes.forEach(n => { n.x = n.sx; n.y = n.sy; n.fx = null; n.fy = null; });
        svg.transition().duration(300).call(zoom.transform, d3.zoomIdentity);
        node.transition().duration(300).attr('transform', d => `translate(${d.sx},${d.sy})`);
        link.transition().duration(300)
            .attr('x1', d => (typeof d.source === 'string' ? nodeById.get(d.source).sx : d.source.sx))
            .attr('y1', d => (typeof d.source === 'string' ? nodeById.get(d.source).sy : d.source.sy))
            .attr('x2', d => (typeof d.target === 'string' ? nodeById.get(d.target).sx : d.target.sx))
            .attr('y2', d => (typeof d.target === 'string' ? nodeById.get(d.target).sy : d.target.sy));
    } else {
        simulation.alpha(0.8).restart();
    }
});

// Toolbar buttons
document.getElementById('startBtn').onclick = ()=> { if (layoutMode==='proximity'){ simulation.alpha(0.6).restart(); } };
document.getElementById('pauseBtn').onclick = ()=> { simulation.stop(); };
document.getElementById('resetBtn').onclick = ()=> svg.transition().duration(400).call(zoom.transform, d3.zoomIdentity);
document.getElementById('saveBtn').onclick = ()=> {
    const out = data.nodes.map(n => ({id:n.id, x:Math.round((n.x)||0), y:Math.round((n.y)||0)}));
    const blob = new Blob([JSON.stringify(out, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'node_positions_combo.json';
    a.click();
    URL.revokeObjectURL(url);
};
document.getElementById('snapBtn').onclick = ()=> {
    const grid = 40;
    data.nodes.forEach(n => { n.x = Math.round(n.x / grid) * grid; n.y = Math.round(n.y / grid) * grid; });
    simulation.stop();
    node.attr('transform', d => `translate(${d.x},${d.y})`);
    link
        .attr('x1', d => (typeof d.source === 'string' ? nodeById.get(d.source).x : d.source.x))
        .attr('y1', d => (typeof d.source === 'string' ? nodeById.get(d.source).y : d.source.y))
        .attr('x2', d => (typeof d.target === 'string' ? nodeById.get(d.target).x : d.target.x))
        .attr('y2', d => (typeof d.target === 'string' ? nodeById.get(d.target).y : d.target.y));
};

// Backward (revision) color gradient by module gap
const backwardPalette = ["#ff4d4d", "#ff914d", "#ffbf4d", "#ffe04d", "#fff54d"];
function colorForGap(gap){ return backwardPalette[Math.min(Math.max(1, gap)-1, backwardPalette.length-1)]; }

// Highlight logic
function highlight(id){
    const n = nodeById.get(id);
    const neighbors = adj.get(id) || new Set();
    node.classed('dim', d => !(d.id===id || neighbors.has(d.id)));
    link.classed('dim', true).classed('highlight', false).classed('forward', false).classed('backward', false).style('stroke', null);
    node.select('.hoverring').attr('opacity', d => d.id===id ? 1 : 0);
    applyBaseLinkVisibility();
    link.filter(l => {
                const k = linkKey(l);
                const srcId = k.split('|')[0];
                const tgtId = k.split('|')[1];
                return (srcId===id || tgtId===id);
            })
            .classed('hidden', false).classed('dim', false).classed('highlight', true)
            .each(function(l){
                const src = (typeof l.source === 'string') ? nodeById.get(l.source) : l.source;
                const tgt = (typeof l.target === 'string') ? nodeById.get(l.target) : l.target;
                const other = (src.id===id) ? tgt : src;
                const gap = Math.abs(n.module_num - other.module_num);
                const isBackward = other.module_num < n.module_num;
                const isForward = other.module_num > n.module_num;
                if (linkFilter === 'revision'){
                    if (!isBackward){ d3.select(this).classed('hidden', true); return; }
                    d3.select(this).classed('backward', true).style('stroke', colorForGap(gap));
                } else {
                    if (isBackward) d3.select(this).classed('backward', true).style('stroke', colorForGap(gap));
                    if (isForward) d3.select(this).classed('forward', true);
                }
            });
    showDetails(id);
}

function clearHighlight(){
    node.classed('dim', false);
    link.classed('dim', false).classed('highlight', false).classed('forward', false).classed('backward', false).style('stroke', null);
    applyBaseLinkVisibility();
    node.select('.hoverring').attr('opacity', 0);
}

// Details
function showDetails(id){
    // filter concept dropdown to tags connected to this node
    (function(){
        try{
            const neighborIds = Array.from(adj.get(id) || []);
            const tagSet = new Set();
            neighborIds.forEach(nb => {
                const key = [id, nb].sort().join('|');
                const tags = edgeTags.get(key) || [];
                tags.forEach(t => tagSet.add(t));
            });
            populateTagSelect(Array.from(tagSet));
        } catch (e) { /* fail safe: keep previous options */ }
    })();

    selectedId = id;
    if (typeof getTagsForNode === 'function' && typeof populateReviewSelect === 'function') {
        const nodeTags = getTagsForNode(id);
        populateReviewSelect(nodeTags);
    }
    if (typeof updateReviewButtonState === 'function') updateReviewButtonState();
    g.selectAll('.node').classed('selected', d => d.id === id);

    const n = nodeById.get(id);
    const neighborIds = Array.from(adj.get(id) || []);
    const revision = [], builds = [], same = [];
    neighborIds.forEach(nn => {
        const m2 = nodeById.get(nn).module_num;
        if (m2 < n.module_num) revision.push(nn);
        else if (m2 > n.module_num) builds.push(nn);
        else same.push(nn);
    });
    const fmt = arr => arr.length
        ? arr.map(x => {
                const node = nodeById.get(x);
                const color = node.color;
                return `<div class="lo-item">
                    <span class="lo-swatch" style="background:${color}"></span>
                    <span class="lo-id" style="color:${color}">${x}</span>
                    <span class="lo-desc">${node.description}</span>
                </div>`;
            }).join('')
        : '<div class="lo-item small">None</div>';
    const el = document.getElementById('details');
    el.innerHTML = `
        <div class="badge">Module ${n.module_num}: ${n.module_title}</div>
        <h2>${n.id}</h2>
        <p>${n.description}</p>
        <div class="list-head">Revision learning objectives (earlier modules):</div>
        <div class="list">${fmt(revision)}</div>
        <div class="list-head">Builds into (later modules):</div>
        <div class="list">${fmt(builds)}</div>
        <div class="list-head">Connected (same module):</div>
        <div class="list">${fmt(same)}</div>
    `;
}

// Legend
const legend = d3.select('#globalLegendContent');
Array.from(new Set(data.nodes.map(d=>d.module_num))).sort((a,b)=>a-b).forEach(m => {
    const row = legend.append('div').attr('class','legend-row');
    const example = data.nodes.find(d=>d.module_num===m);
    const color = example.color;
    const title = example.module_title;
    row.append('div').attr('class','swatch').style('background', color);
    row.append('div').attr('class','small').text(`Module ${m} — ${title}`);
});
// placeholder for review section
d3.select('#globalLegendContent').append('div').attr('class','review-section');

applyBaseLinkVisibility();
</script>
<script>
// Center rows in "stacked" layout dynamically (fixes off-center Module 4)
(function(){
  if (typeof d3 === 'undefined') return;
  const svg = d3.select('#viz');
  function centerStackedRows(){
    try{
      const g = d3.select('#viz').select('g');
      // Grab node selection and data (works with existing bindings)
      const nodes = [];
      g.selectAll('.node').each(function(d){ if (d) nodes.push(d); });
      if (!nodes.length) return;

      // Compute modules -> nodes
      const byM = new Map();
      nodes.forEach(n => {
        const m = n.module_num;
        if (!byM.has(m)) byM.set(m, []);
        byM.get(m).push(n);
      });

      // Layout params (match your canvas)
      const width = +svg.attr('width') || 1400;
      const height = +svg.attr('height') || 1000;
      const left = 120, right = 120, top = 90, bottom = 90;
      const totalWidth = width - left - right;
      const rowCount = 10;
      const rowSpacing = (height - top - bottom) / (rowCount - 1);

      // Compute Y per module (Module 1 bottom up to 10 top, matching your earlier spec)
      const yFor = (m) => (height - bottom) - (m - 1) * rowSpacing;

      // For each module present, center its items across available totalWidth
      for (let [m, arr] of byM.entries()){
        arr.sort((a,b)=> (a.label||'').localeCompare(b.label||''));
        const k = Math.max(arr.length, 1);
        const step = totalWidth / (k + 1); // ensures centering regardless of k
        // Assign new x/y into the datum so existing transitions can read from n.sx/n.sy
        arr.forEach((n, i) => {
          n.sx = left + (i+1) * step;
          n.sy = yFor(m);
        });
      }

      // Update positions immediately if we're already in stacked mode
      // Try to detect stacked by checking whether nodes are near their sx/sy
      // but simplest is to re-apply stacked transform on demand:
      const node = g.selectAll('.node');
      const link = g.selectAll('.links line');

      node.transition().duration(250).attr('transform', d => `translate(${d.sx||d.x},${d.sy||d.y})`);
      link.transition().duration(250)
        .attr('x1', d => (d.source.sx ?? d.source.x))
        .attr('y1', d => (d.source.sy ?? d.source.y))
        .attr('x2', d => (d.target.sx ?? d.target.x))
        .attr('y2', d => (d.target.sy ?? d.target.y));
    }catch(e){ console.warn('centerStackedRows error', e); }
  }

  // Hook into layout mode changes if the app exposes a select#layoutMode
  const layoutSelect = document.getElementById('layoutMode');
  if (layoutSelect){
    layoutSelect.addEventListener('change', () => {
      if (layoutSelect.value === 'stacked'){ centerStackedRows(); }
    });
  }

  // Also expose a manual fix function in case user is already in stacked view
  window.recenterStacked = centerStackedRows;
})();
</script>


<script>
// Ensure full-circle placement for Rings layout (Module 4 was appearing as a half circle)
(function(){
  if (typeof d3 === 'undefined') return;
  const svg = d3.select('#viz');

  function fullCircleRings(){
    try{
      const g = d3.select('#viz').select('g');
      const nodes = [];
      g.selectAll('.node').each(function(d){ if (d) nodes.push(d); });
      if (!nodes.length) return;

      const width = +svg.attr('width') || 1400;
      const height = +svg.attr('height') || 1000;
      const cx = width/2, cy = height/2;

      // Group nodes by module
      const byM = new Map();
      nodes.forEach(n => {
        const m = n.module_num;
        if (!byM.has(m)) byM.set(m, []);
        byM.get(m).push(n);
      });

      // Sort labels for stable ordering
      byM.forEach(arr => arr.sort((a,b)=> (a.label||'').localeCompare(b.label||'')));

      // Radii (match prior visuals; adjust if your base file differs)
      const innerRings = {1:120, 2:200, 3:280};
      const outerModules = [4,5,6,7,8,9,10];
      const R_outer = 460;      // center radius for modules 4–10
      const miniR   = 58;       // local circle radius around each module center

      // Place modules 1–3 on full circles around center
      [1,2,3].forEach(m => {
        const arr = byM.get(m) || [];
        const k = Math.max(arr.length, 1);
        for (let i=0; i<k; i++){
          const ang = (2*Math.PI*i)/k - Math.PI/2; // start at top
          const rx = cx + innerRings[m] * Math.cos(ang);
          const ry = cy + innerRings[m] * Math.sin(ang);
          arr[i].rx = rx; arr[i].ry = ry;
        }
      });

      // Place modules 4–10 around big ring, and each module's LOs on a FULL mini-circle
      outerModules.forEach((m, idx) => {
        const arr = byM.get(m) || [];
        const k = Math.max(arr.length, 1);
        // center point for this module on big outer ring
        const ang0 = (2*Math.PI*idx)/outerModules.length - Math.PI/2;
        const mx = cx + R_outer * Math.cos(ang0);
        const my = cy + R_outer * Math.sin(ang0);
        for (let i=0; i<k; i++){
          const a = (2*Math.PI*i)/k; // FULL 360° for mini circle
          const rx = mx + miniR * Math.cos(a);
          const ry = my + miniR * Math.sin(a);
          arr[i].rx = rx; arr[i].ry = ry;
        }
      });

      // Apply positions if Rings is active
      const node = g.selectAll('.node');
      const link = g.selectAll('.links line');

      node.transition().duration(300).attr('transform', d => `translate(${d.rx||d.x},${d.ry||d.y})`);
      link.transition().duration(300)
        .attr('x1', d => (d.source.rx ?? d.source.x))
        .attr('y1', d => (d.source.ry ?? d.source.y))
        .attr('x2', d => (d.target.rx ?? d.target.x))
        .attr('y2', d => (d.target.ry ?? d.target.y));
    }catch(e){ console.warn('fullCircleRings error', e); }
  }

  // Hook into layout switch
  const layoutSelect = document.getElementById('layoutMode');
  if (layoutSelect){
    layoutSelect.addEventListener('change', () => {
      if (layoutSelect.value === 'rings'){ fullCircleRings(); }
    });
  }

  // If the page loads already in rings, fix after a brief tick
  setTimeout(()=>{
    if (layoutSelect && layoutSelect.value === 'rings') fullCircleRings();
  }, 300);

  // Expose manual helper
  window.recenterRingsFullCircle = fullCircleRings;
})();
</script>
</body>
</html>